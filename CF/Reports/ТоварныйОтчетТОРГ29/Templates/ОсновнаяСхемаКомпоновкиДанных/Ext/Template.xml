<?xml version="1.0" encoding="UTF-8"?>
<DataCompositionSchema xmlns="http://v8.1c.ru/8.1/data-composition-system/schema" xmlns:dcscom="http://v8.1c.ru/8.1/data-composition-system/common" xmlns:dcscor="http://v8.1c.ru/8.1/data-composition-system/core" xmlns:dcsset="http://v8.1c.ru/8.1/data-composition-system/settings" xmlns:v8="http://v8.1c.ru/8.1/data/core" xmlns:v8ui="http://v8.1c.ru/8.1/data/ui" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<dataSource>
		<name>ИсточникДанных1</name>
		<dataSourceType>Local</dataSourceType>
	</dataSource>
	<dataSet xsi:type="DataSetQuery">
		<name>Запрос</name>
		<field xsi:type="DataSetFieldField">
			<dataPath>КоличествоКонечныйОстаток</dataPath>
			<field>КоличествоКонечныйОстаток</field>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧЦ=15; ЧДЦ=3</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ВыделятьОтрицательные</dcscor:parameter>
					<dcscor:value xsi:type="xs:boolean">true</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Номенклатура</dataPath>
			<field>Номенклатура</field>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Регистратор</dataPath>
			<field>Регистратор</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Документ движения (регистратор))</v8:content>
				</v8:item>
			</title>
			<role>
				<dcscom:periodNumber>1</dcscom:periodNumber>
				<dcscom:periodType>Main</dcscom:periodType>
				<dcscom:required>true</dcscom:required>
			</role>
			<presentationExpression>Регистратор</presentationExpression>
			<orderExpression>
				<dcscom:expression>ПериодСекунда</dcscom:expression>
				<dcscom:orderType>Asc</dcscom:orderType>
				<dcscom:autoOrder>false</dcscom:autoOrder>
			</orderExpression>
			<orderExpression>
				<dcscom:expression>Регистратор</dcscom:expression>
				<dcscom:orderType>Asc</dcscom:orderType>
				<dcscom:autoOrder>false</dcscom:autoOrder>
			</orderExpression>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Склад</dataPath>
			<field>Склад</field>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СуммаКонечныйОстаток</dataPath>
			<field>СуммаКонечныйОстаток</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Сумма конечный остаток</v8:content>
				</v8:item>
			</title>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧЦ=15; ЧДЦ=2</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ВыделятьОтрицательные</dcscor:parameter>
					<dcscor:value xsi:type="xs:boolean">true</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СуммаНачальныйОстаток</dataPath>
			<field>СуммаНачальныйОстаток</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Сумма начальный остаток</v8:content>
				</v8:item>
			</title>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧЦ=15; ЧДЦ=2</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ВыделятьОтрицательные</dcscor:parameter>
					<dcscor:value xsi:type="xs:boolean">true</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СуммаПриход</dataPath>
			<field>СуммаПриход</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Сумма приход</v8:content>
				</v8:item>
			</title>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧЦ=15; ЧДЦ=2</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СуммаРасход</dataPath>
			<field>СуммаРасход</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Сумма расход</v8:content>
				</v8:item>
			</title>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧЦ=15; ЧДЦ=2</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Характеристика</dataPath>
			<field>Характеристика</field>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Организация</dataPath>
			<field>Организация</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Дельта</dataPath>
			<field>Дельта</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Дельта</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Цена</dataPath>
			<field>Цена</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Цена</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПериодМаксимум</dataPath>
			<field>ПериодМаксимум</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Период максимум</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СтараяЦена</dataPath>
			<field>СтараяЦена</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Старая цена</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Период</dataPath>
			<field>Период</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПериодСекунда</dataPath>
			<field>ПериодСекунда</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Период секунда</v8:content>
				</v8:item>
			</title>
			<role>
				<dcscom:periodNumber>2</dcscom:periodNumber>
				<dcscom:periodType>Main</dcscom:periodType>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПериодДень</dataPath>
			<field>ПериодДень</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Период день</v8:content>
				</v8:item>
			</title>
			<role>
				<dcscom:periodNumber>5</dcscom:periodNumber>
				<dcscom:periodType>Main</dcscom:periodType>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПериодМинута</dataPath>
			<field>ПериодМинута</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Период минута</v8:content>
				</v8:item>
			</title>
			<role>
				<dcscom:periodNumber>3</dcscom:periodNumber>
				<dcscom:periodType>Main</dcscom:periodType>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КоличествоПриход</dataPath>
			<field>КоличествоПриход</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Количество приход</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПериодМесяц</dataPath>
			<field>ПериодМесяц</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Период месяц</v8:content>
				</v8:item>
			</title>
			<role>
				<dcscom:periodNumber>7</dcscom:periodNumber>
				<dcscom:periodType>Main</dcscom:periodType>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КоличествоНачальныйОстаток</dataPath>
			<field>КоличествоНачальныйОстаток</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Количество начальный остаток</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПериодГод</dataPath>
			<field>ПериодГод</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Период год</v8:content>
				</v8:item>
			</title>
			<role>
				<dcscom:periodNumber>9</dcscom:periodNumber>
				<dcscom:periodType>Main</dcscom:periodType>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПериодЧас</dataPath>
			<field>ПериодЧас</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Период час</v8:content>
				</v8:item>
			</title>
			<role>
				<dcscom:periodNumber>4</dcscom:periodNumber>
				<dcscom:periodType>Main</dcscom:periodType>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КоличествоРасход</dataPath>
			<field>КоличествоРасход</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Количество расход</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПериодНеделя</dataPath>
			<field>ПериодНеделя</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Период неделя</v8:content>
				</v8:item>
			</title>
			<role>
				<dcscom:periodNumber>6</dcscom:periodNumber>
				<dcscom:periodType>Main</dcscom:periodType>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПериодКвартал</dataPath>
			<field>ПериодКвартал</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Период квартал</v8:content>
				</v8:item>
			</title>
			<role>
				<dcscom:periodNumber>8</dcscom:periodNumber>
				<dcscom:periodType>Main</dcscom:periodType>
			</role>
		</field>
		<dataSource>ИсточникДанных1</dataSource>
		<query>ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ЦеновыеГруппы.ЦеноваяГруппа КАК ЦеноваяГруппа,
	ЦеновыеГруппы.ВидЦен КАК ВидЦен,
	ЦеновыеГруппы.Ссылка КАК ПравилоЦенообразования
ПОМЕСТИТЬ ЦеновыеГруппыПравила
ИЗ
	Справочник.ПравилаЦенообразования.ЦеновыеГруппы КАК ЦеновыеГруппы
ГДЕ
	ЦеновыеГруппы.Ссылка = &amp;ПравилоЦенообразования

ИНДЕКСИРОВАТЬ ПО
	ЦеноваяГруппа,
	ВидЦен
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ВидЦеныПравила.ВидЦен КАК ВидЦен,
	ВидЦеныПравила.Ссылка КАК ПравилоЦенообразования
ПОМЕСТИТЬ ВидЦеныПравила
ИЗ
	Справочник.ПравилаЦенообразования КАК ВидЦеныПравила
ГДЕ
	ВидЦеныПравила.Ссылка = &amp;ПравилоЦенообразования
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	Ассортимент.Период КАК Период,
	Ассортимент.Регистратор КАК Регистратор,
	Ассортимент.Номенклатура КАК Номенклатура,
	Ассортимент.ВидЦен КАК ВидЦен
ПОМЕСТИТЬ АссортиментНоменклатуры
ИЗ
	РегистрСведений.Ассортимент КАК Ассортимент
ГДЕ
	&amp;ИспользоватьАссортимент
	И Ассортимент.ОбъектПланирования = &amp;ОбъектПланирования
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ПередачаТоваровМеждуОрганизациями.Ссылка КАК Ссылка
ПОМЕСТИТЬ ТаблицаРазрешенныхПеремещений
ИЗ
	Документ.ПередачаТоваровМеждуОрганизациями КАК ПередачаТоваровМеждуОрганизациями
ГДЕ
	ПередачаТоваровМеждуОрганизациями.Магазин = &amp;Магазин
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	Склады.Ссылка КАК Склад
ПОМЕСТИТЬ СкладыМагазина
ИЗ
	Справочник.Склады КАК Склады
ГДЕ
	Склады.Магазин = &amp;Магазин
{ГДЕ
	(Склады.Ссылка = &amp;Склад)}
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ТоварыОрганизаций.ПериодСекунда КАК Период,
	ТоварыОрганизаций.Регистратор КАК Регистратор,
	ТоварыОрганизаций.Номенклатура КАК Номенклатура,
	ТоварыОрганизаций.Характеристика КАК Характеристика,
	ТоварыОрганизаций.Склад КАК Склад,
	ЕСТЬNULL(ЦеновыеГруппыПравила.ВидЦен, ВидЦеныПравила.ВидЦен) КАК ВидЦенПоУмолчанию,
	ТоварыОрганизаций.КоличествоКонечныйОстаток КАК КоличествоКонечныйОстаток
ПОМЕСТИТЬ ОстаткиИОбороты
ИЗ
	РегистрНакопления.ТоварыОрганизаций.ОстаткиИОбороты(
			,
			,
			Авто,
			,
			Склад В
				(ВЫБРАТЬ
					СкладыМагазина.Склад
				ИЗ
					СкладыМагазина)) КАК ТоварыОрганизаций
		ЛЕВОЕ СОЕДИНЕНИЕ ВидЦеныПравила КАК ВидЦеныПравила
		ПО (ИСТИНА)
		ЛЕВОЕ СОЕДИНЕНИЕ ЦеновыеГруппыПравила КАК ЦеновыеГруппыПравила
		ПО ТоварыОрганизаций.Номенклатура.ЦеноваяГруппа = ЦеновыеГруппыПравила.ЦеноваяГруппа
ГДЕ
	ВЫБОР
			КОГДА ТоварыОрганизаций.Регистратор ССЫЛКА Документ.ПередачаТоваровМеждуОрганизациями
				ТОГДА ТоварыОрганизаций.Регистратор В
						(ВЫБРАТЬ
							ТаблицаРазрешенныхПеремещений.Ссылка КАК Ссылка
						ИЗ
							ТаблицаРазрешенныхПеремещений КАК ТаблицаРазрешенныхПеремещений)
			ИНАЧЕ ИСТИНА
		КОНЕЦ

ИНДЕКСИРОВАТЬ ПО
	Номенклатура,
	Склад,
	Характеристика
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ЦеныНоменклатуры.Период КАК Период,
	ЦеныНоменклатуры.Регистратор КАК Регистратор,
	ЦеныНоменклатуры.ВидЦены КАК ВидЦены,
	ЦеныНоменклатуры.Номенклатура КАК Номенклатура,
	ЦеныНоменклатуры.Характеристика КАК Характеристика,
	ЦеныНоменклатуры.Цена КАК Цена,
	ЦеныНоменклатуры.Упаковка КАК Упаковка
ПОМЕСТИТЬ УстановленныеЦеныНоменклатуры
ИЗ
	РегистрСведений.ЦеныНоменклатуры КАК ЦеныНоменклатуры
ГДЕ
	НЕ &amp;ИспользоватьПрименениеЦен
	И ЦеныНоменклатуры.ВидЦены В
			(ВЫБРАТЬ
				ЦеновыеГруппыПравила.ВидЦен
			ИЗ
				ЦеновыеГруппыПравила)
{ГДЕ
	(ЦеныНоменклатуры.Период &lt;= &amp;КонецПериода)}

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	ЦеныНоменклатуры.Период,
	ЦеныНоменклатуры.Регистратор,
	ЦеныНоменклатуры.ВидЦены,
	ЦеныНоменклатуры.Номенклатура,
	ЦеныНоменклатуры.Характеристика,
	ЦеныНоменклатуры.Цена,
	ЦеныНоменклатуры.Упаковка
ИЗ
	РегистрСведений.ЦеныНоменклатуры КАК ЦеныНоменклатуры
ГДЕ
	НЕ &amp;ИспользоватьПрименениеЦен
	И ЦеныНоменклатуры.ВидЦены В
			(ВЫБРАТЬ
				ВидЦеныПравила.ВидЦен
			ИЗ
				ВидЦеныПравила)
{ГДЕ
	(ЦеныНоменклатуры.Период &lt;= &amp;КонецПериода)}
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ДействующиеЦеныНоменклатуры.Период КАК Период,
	ДействующиеЦеныНоменклатуры.Регистратор КАК Регистратор,
	ДействующиеЦеныНоменклатуры.ОбъектЦенообразования КАК ОбъектЦенообразования,
	ДействующиеЦеныНоменклатуры.Номенклатура КАК Номенклатура,
	ДействующиеЦеныНоменклатуры.Характеристика КАК Характеристика,
	ДействующиеЦеныНоменклатуры.Цена КАК Цена,
	ДействующиеЦеныНоменклатуры.Упаковка КАК Упаковка
ПОМЕСТИТЬ ДействующиеЦеныНоменклатуры
ИЗ
	РегистрСведений.ДействующиеЦеныНоменклатуры КАК ДействующиеЦеныНоменклатуры
ГДЕ
	&amp;ИспользоватьПрименениеЦен
	И ДействующиеЦеныНоменклатуры.ОбъектЦенообразования = &amp;Магазин
{ГДЕ
	(ДействующиеЦеныНоменклатуры.Период &lt;= &amp;КонецПериода)}
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ИзмененияАссортимента.Период КАК Период,
	ИзмененияАссортимента.Регистратор КАК Регистратор,
	ИзмененияАссортимента.Номенклатура КАК Номенклатура,
	ЕСТЬNULL(ХарактеристикиНоменклатуры.Ссылка, ЗНАЧЕНИЕ(Справочник.ХарактеристикиНоменклатуры.ПустаяСсылка)) КАК ХарактеристикаНоменклатуры,
	ИзмененияАссортимента.ВидЦен КАК ВидЦен
ПОМЕСТИТЬ ПервоеИзменениеАссортимента
ИЗ
	(ВЫБРАТЬ
		МАКСИМУМ(Ассортимент.Период) КАК Период,
		МАКСИМУМ(АссортиментДоИзменения.Период) КАК ДатаПрошлогоИзменения,
		Ассортимент.Регистратор КАК Регистратор,
		Ассортимент.Номенклатура КАК Номенклатура,
		Ассортимент.ВидЦен КАК ВидЦен
	ИЗ
		АссортиментНоменклатуры КАК Ассортимент
			ЛЕВОЕ СОЕДИНЕНИЕ АссортиментНоменклатуры КАК АссортиментДоИзменения
			ПО Ассортимент.Период &gt; АссортиментДоИзменения.Период
				И Ассортимент.Номенклатура = АссортиментДоИзменения.Номенклатура
	
	СГРУППИРОВАТЬ ПО
		Ассортимент.Регистратор,
		Ассортимент.ВидЦен,
		Ассортимент.Номенклатура) КАК ИзмененияАссортимента
		ЛЕВОЕ СОЕДИНЕНИЕ АссортиментНоменклатуры КАК АссортиментНоменклатуры
		ПО ИзмененияАссортимента.ДатаПрошлогоИзменения = АссортиментНоменклатуры.Период
			И ИзмененияАссортимента.Номенклатура = АссортиментНоменклатуры.Номенклатура
		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.ХарактеристикиНоменклатуры КАК ХарактеристикиНоменклатуры
		ПО ИзмененияАссортимента.Номенклатура = ХарактеристикиНоменклатуры.Владелец
ГДЕ
	&amp;ИспользоватьАссортимент
	И АссортиментНоменклатуры.ВидЦен ЕСТЬ NULL
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ИзмененияАссортимента.Период КАК Период,
	ИзмененияАссортимента.Регистратор КАК Регистратор,
	ИзмененияАссортимента.Номенклатура КАК Номенклатура,
	ЕСТЬNULL(ХарактеристикиНоменклатуры.Ссылка, ЗНАЧЕНИЕ(Справочник.ХарактеристикиНоменклатуры.ПустаяСсылка)) КАК ХарактеристикаНоменклатуры,
	ИзмененияАссортимента.ВидЦен КАК ВидЦен,
	ЕСТЬNULL(ИзмененияАссортимента.ДатаСледующегоИзменения, ДАТАВРЕМЯ(3999, 1, 1)) КАК ДатаСледующегоИзменения
ПОМЕСТИТЬ ПоследующиеИзмененияАссортимента
ИЗ
	(ВЫБРАТЬ
		МИНИМУМ(Ассортимент.Период) КАК Период,
		МИНИМУМ(АссортиментДоИзменения.Период) КАК ДатаСледующегоИзменения,
		Ассортимент.Регистратор КАК Регистратор,
		Ассортимент.Номенклатура КАК Номенклатура,
		Ассортимент.ВидЦен КАК ВидЦен
	ИЗ
		АссортиментНоменклатуры КАК Ассортимент
			ЛЕВОЕ СОЕДИНЕНИЕ АссортиментНоменклатуры КАК АссортиментДоИзменения
			ПО Ассортимент.Период &lt; АссортиментДоИзменения.Период
				И Ассортимент.Номенклатура = АссортиментДоИзменения.Номенклатура
	
	СГРУППИРОВАТЬ ПО
		Ассортимент.Регистратор,
		Ассортимент.ВидЦен,
		Ассортимент.Номенклатура) КАК ИзмененияАссортимента
		ЛЕВОЕ СОЕДИНЕНИЕ АссортиментНоменклатуры КАК АссортиментНоменклатуры
		ПО ИзмененияАссортимента.ДатаСледующегоИзменения = АссортиментНоменклатуры.Период
			И ИзмененияАссортимента.Номенклатура = АссортиментНоменклатуры.Номенклатура
		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.ХарактеристикиНоменклатуры КАК ХарактеристикиНоменклатуры
		ПО ИзмененияАссортимента.Номенклатура = ХарактеристикиНоменклатуры.Владелец
ГДЕ
	&amp;ИспользоватьАссортимент
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ОстаткиИОбороты.Номенклатура КАК Номенклатура,
	ОстаткиИОбороты.Характеристика КАК Характеристика,
	ОстаткиИОбороты.ВидЦенПоУмолчанию КАК ВидЦен,
	ДАТАВРЕМЯ(1, 1, 1) КАК ПериодДействияС,
	ЕСТЬNULL(ПервоеИзменениеАссортимента.Период, ДАТАВРЕМЯ(3999, 1, 1)) КАК ПериодДействияДо
ПОМЕСТИТЬ ФильтрУстановкиЦен
ИЗ
	(ВЫБРАТЬ РАЗЛИЧНЫЕ
		ОстаткиИОбороты.Номенклатура КАК Номенклатура,
		ОстаткиИОбороты.Характеристика КАК Характеристика,
		ОстаткиИОбороты.ВидЦенПоУмолчанию КАК ВидЦенПоУмолчанию
	ИЗ
		ОстаткиИОбороты КАК ОстаткиИОбороты) КАК ОстаткиИОбороты
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ПервоеИзменениеАссортимента КАК ПервоеИзменениеАссортимента
		ПО ОстаткиИОбороты.Номенклатура = ПервоеИзменениеАссортимента.Номенклатура
			И ОстаткиИОбороты.Характеристика = ПервоеИзменениеАссортимента.ХарактеристикаНоменклатуры
ГДЕ
	&amp;ИспользоватьАссортимент

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	ПоследующиеИзмененияАссортимента.Номенклатура,
	ПоследующиеИзмененияАссортимента.ХарактеристикаНоменклатуры,
	ПоследующиеИзмененияАссортимента.ВидЦен,
	ПоследующиеИзмененияАссортимента.Период,
	ПоследующиеИзмененияАссортимента.ДатаСледующегоИзменения
ИЗ
	ПоследующиеИзмененияАссортимента КАК ПоследующиеИзмененияАссортимента
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	&amp;Магазин КАК Магазин,
	ТаблицаЦен.Период КАК Период,
	ТаблицаЦен.Регистратор КАК Регистратор,
	ТаблицаЦен.Номенклатура КАК Номенклатура,
	ТаблицаЦен.Характеристика КАК Характеристика,
	ВЫБОР
		КОГДА ЦеныНоменклатурыА.Упаковка = ЗНАЧЕНИЕ(Справочник.УпаковкиНоменклатуры.ПустаяСсылка)
				ИЛИ ЕСТЬNULL(ЦеныНоменклатурыА.Упаковка.Коэффициент, 0) = 0
			ТОГДА ЦеныНоменклатурыА.Цена
		ИНАЧЕ ЦеныНоменклатурыА.Цена / ЦеныНоменклатурыА.Упаковка.Коэффициент
	КОНЕЦ КАК Цена,
	ВЫБОР
		КОГДА ЦеныНоменклатурыБ.Цена ЕСТЬ NULL
			ТОГДА 0
		КОГДА ЦеныНоменклатурыБ.Упаковка = ЗНАЧЕНИЕ(Справочник.УпаковкиНоменклатуры.ПустаяСсылка)
				ИЛИ ЕСТЬNULL(ЦеныНоменклатурыБ.Упаковка.Коэффициент, 0) = 0
			ТОГДА ЦеныНоменклатурыБ.Цена
		ИНАЧЕ ЦеныНоменклатурыБ.Цена / ЦеныНоменклатурыБ.Упаковка.Коэффициент
	КОНЕЦ КАК СтараяЦена,
	ВЫБОР
		КОГДА ЦеныНоменклатурыА.Упаковка = ЗНАЧЕНИЕ(Справочник.УпаковкиНоменклатуры.ПустаяСсылка)
				ИЛИ ЕСТЬNULL(ЦеныНоменклатурыА.Упаковка.Коэффициент, 0) = 0
			ТОГДА ЦеныНоменклатурыА.Цена
		ИНАЧЕ ЦеныНоменклатурыА.Цена / ЦеныНоменклатурыА.Упаковка.Коэффициент
	КОНЕЦ - ВЫБОР
		КОГДА ЦеныНоменклатурыБ.Цена ЕСТЬ NULL
			ТОГДА 0
		КОГДА ЦеныНоменклатурыБ.Упаковка = ЗНАЧЕНИЕ(Справочник.УпаковкиНоменклатуры.ПустаяСсылка)
				ИЛИ ЕСТЬNULL(ЦеныНоменклатурыБ.Упаковка.Коэффициент, 0) = 0
			ТОГДА ЦеныНоменклатурыБ.Цена
		ИНАЧЕ ЦеныНоменклатурыБ.Цена / ЦеныНоменклатурыБ.Упаковка.Коэффициент
	КОНЕЦ КАК Дельта,
	ЕСТЬNULL(ЦеновыеГруппыПравила.ВидЦен, ВидЦеныПравила.ВидЦен) КАК ВидЦен
ПОМЕСТИТЬ ИзмененияЦен
ИЗ
	(ВЫБРАТЬ
		МАКСИМУМ(ЦеныНоменклатуры.Период) КАК Период,
		МАКСИМУМ(ЦеныДоИзменения.Период) КАК ДатаПрошлогоИзменения,
		ЦеныНоменклатуры.Регистратор КАК Регистратор,
		ЦеныНоменклатуры.ВидЦены КАК ВидЦены,
		ЦеныНоменклатуры.Номенклатура КАК Номенклатура,
		ЦеныНоменклатуры.Характеристика КАК Характеристика
	ИЗ
		УстановленныеЦеныНоменклатуры КАК ЦеныНоменклатуры
			ЛЕВОЕ СОЕДИНЕНИЕ УстановленныеЦеныНоменклатуры КАК ЦеныДоИзменения
			ПО ЦеныНоменклатуры.Период &gt; ЦеныДоИзменения.Период
				И ЦеныНоменклатуры.Номенклатура = ЦеныДоИзменения.Номенклатура
				И ЦеныНоменклатуры.Характеристика = ЦеныДоИзменения.Характеристика
				И ЦеныНоменклатуры.ВидЦены = ЦеныДоИзменения.ВидЦены
	
	СГРУППИРОВАТЬ ПО
		ЦеныНоменклатуры.Регистратор,
		ЦеныНоменклатуры.ВидЦены,
		ЦеныНоменклатуры.Номенклатура,
		ЦеныНоменклатуры.Характеристика) КАК ТаблицаЦен
		ЛЕВОЕ СОЕДИНЕНИЕ ВидЦеныПравила КАК ВидЦеныПравила
		ПО (ВидЦеныПравила.ВидЦен = ТаблицаЦен.ВидЦены)
		ЛЕВОЕ СОЕДИНЕНИЕ ЦеновыеГруппыПравила КАК ЦеновыеГруппыПравила
		ПО (ЦеновыеГруппыПравила.ВидЦен = ТаблицаЦен.ВидЦены)
			И ТаблицаЦен.Номенклатура.ЦеноваяГруппа = ЦеновыеГруппыПравила.ЦеноваяГруппа
		ЛЕВОЕ СОЕДИНЕНИЕ УстановленныеЦеныНоменклатуры КАК ЦеныНоменклатурыА
		ПО ТаблицаЦен.Период = ЦеныНоменклатурыА.Период
			И ТаблицаЦен.Номенклатура = ЦеныНоменклатурыА.Номенклатура
			И ТаблицаЦен.Характеристика = ЦеныНоменклатурыА.Характеристика
			И ТаблицаЦен.ВидЦены = ЦеныНоменклатурыА.ВидЦены
		ЛЕВОЕ СОЕДИНЕНИЕ УстановленныеЦеныНоменклатуры КАК ЦеныНоменклатурыБ
		ПО ТаблицаЦен.ДатаПрошлогоИзменения = ЦеныНоменклатурыБ.Период
			И ТаблицаЦен.Номенклатура = ЦеныНоменклатурыБ.Номенклатура
			И ТаблицаЦен.Характеристика = ЦеныНоменклатурыБ.Характеристика
			И ТаблицаЦен.ВидЦены = ЦеныНоменклатурыБ.ВидЦены
ГДЕ
	НЕ ВЫБОР
				КОГДА ЦеновыеГруппыПравила.ВидЦен ЕСТЬ НЕ NULL 
						И ЦеновыеГруппыПравила.ВидЦен &lt;&gt; ЗНАЧЕНИЕ(Справочник.ВидыЦен.ПустаяСсылка)
					ТОГДА ЦеновыеГруппыПравила.ВидЦен
				КОГДА (ЦеновыеГруппыПравила.ВидЦен ЕСТЬ NULL
						ИЛИ ЦеновыеГруппыПравила.ВидЦен = ЗНАЧЕНИЕ(Справочник.ВидыЦен.ПустаяСсылка))
						И (ВидЦеныПравила.ВидЦен ЕСТЬ НЕ NULL 
							И ВидЦеныПравила.ВидЦен &lt;&gt; ЗНАЧЕНИЕ(Справочник.ВидыЦен.ПустаяСсылка))
					ТОГДА ВидЦеныПравила.ВидЦен
				ИНАЧЕ NULL
			КОНЕЦ ЕСТЬ NULL

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	ТаблицаЦен1.ОбъектЦенообразования,
	ТаблицаЦен1.Период,
	ТаблицаЦен1.Регистратор,
	ТаблицаЦен1.Номенклатура,
	ТаблицаЦен1.Характеристика,
	ВЫБОР
		КОГДА ЦеныНоменклатурыА.Упаковка = ЗНАЧЕНИЕ(Справочник.УпаковкиНоменклатуры.ПустаяСсылка)
				ИЛИ ЕСТЬNULL(ЦеныНоменклатурыА.Упаковка.Коэффициент, 0) = 0
			ТОГДА ЦеныНоменклатурыА.Цена
		ИНАЧЕ ЦеныНоменклатурыА.Цена / ЦеныНоменклатурыА.Упаковка.Коэффициент
	КОНЕЦ,
	ВЫБОР
		КОГДА ЦеныНоменклатурыБ.Цена ЕСТЬ NULL
			ТОГДА 0
		КОГДА ЦеныНоменклатурыБ.Упаковка = ЗНАЧЕНИЕ(Справочник.УпаковкиНоменклатуры.ПустаяСсылка)
				ИЛИ ЕСТЬNULL(ЦеныНоменклатурыБ.Упаковка.Коэффициент, 0) = 0
			ТОГДА ЦеныНоменклатурыБ.Цена
		ИНАЧЕ ЦеныНоменклатурыБ.Цена / ЦеныНоменклатурыБ.Упаковка.Коэффициент
	КОНЕЦ,
	ВЫБОР
		КОГДА ЦеныНоменклатурыА.Упаковка = ЗНАЧЕНИЕ(Справочник.УпаковкиНоменклатуры.ПустаяСсылка)
				ИЛИ ЕСТЬNULL(ЦеныНоменклатурыА.Упаковка.Коэффициент, 0) = 0
			ТОГДА ЦеныНоменклатурыА.Цена
		ИНАЧЕ ЦеныНоменклатурыА.Цена / ЦеныНоменклатурыА.Упаковка.Коэффициент
	КОНЕЦ - ВЫБОР
		КОГДА ЦеныНоменклатурыБ.Цена ЕСТЬ NULL
			ТОГДА 0
		КОГДА ЦеныНоменклатурыБ.Упаковка = ЗНАЧЕНИЕ(Справочник.УпаковкиНоменклатуры.ПустаяСсылка)
				ИЛИ ЕСТЬNULL(ЦеныНоменклатурыБ.Упаковка.Коэффициент, 0) = 0
			ТОГДА ЦеныНоменклатурыБ.Цена
		ИНАЧЕ ЦеныНоменклатурыБ.Цена / ЦеныНоменклатурыБ.Упаковка.Коэффициент
	КОНЕЦ,
	ЕСТЬNULL(ЦеновыеГруппыПравила.ВидЦен, ВидЦеныПравила.ВидЦен)
ИЗ
	(ВЫБРАТЬ
		ДействующиеЦены.ОбъектЦенообразования КАК ОбъектЦенообразования,
		ДействующиеЦены.Номенклатура КАК Номенклатура,
		ДействующиеЦены.Характеристика КАК Характеристика,
		МАКСИМУМ(ДействующиеЦены.Период) КАК Период,
		МАКСИМУМ(ДействующиеСтарыеЦены.Период) КАК ДатаПрошлогоИзменения,
		ДействующиеЦены.Регистратор КАК Регистратор
	ИЗ
		ДействующиеЦеныНоменклатуры КАК ДействующиеЦены
			ЛЕВОЕ СОЕДИНЕНИЕ ДействующиеЦеныНоменклатуры КАК ДействующиеСтарыеЦены
			ПО ДействующиеЦены.Номенклатура = ДействующиеСтарыеЦены.Номенклатура
				И ДействующиеЦены.Характеристика = ДействующиеСтарыеЦены.Характеристика
				И ДействующиеЦены.Период &gt; ДействующиеСтарыеЦены.Период
				И (ДействующиеСтарыеЦены.ОбъектЦенообразования = &amp;Магазин)
	
	СГРУППИРОВАТЬ ПО
		ДействующиеЦены.Регистратор,
		ДействующиеЦены.ОбъектЦенообразования,
		ДействующиеЦены.Номенклатура,
		ДействующиеЦены.Характеристика) КАК ТаблицаЦен1
		ЛЕВОЕ СОЕДИНЕНИЕ ДействующиеЦеныНоменклатуры КАК ЦеныНоменклатурыА
		ПО ТаблицаЦен1.Период = ЦеныНоменклатурыА.Период
			И ТаблицаЦен1.Номенклатура = ЦеныНоменклатурыА.Номенклатура
			И ТаблицаЦен1.Характеристика = ЦеныНоменклатурыА.Характеристика
			И ТаблицаЦен1.ОбъектЦенообразования = ЦеныНоменклатурыА.ОбъектЦенообразования
		ЛЕВОЕ СОЕДИНЕНИЕ ДействующиеЦеныНоменклатуры КАК ЦеныНоменклатурыБ
		ПО ТаблицаЦен1.ДатаПрошлогоИзменения = ЦеныНоменклатурыБ.Период
			И ТаблицаЦен1.Номенклатура = ЦеныНоменклатурыБ.Номенклатура
			И ТаблицаЦен1.Характеристика = ЦеныНоменклатурыБ.Характеристика
			И ТаблицаЦен1.ОбъектЦенообразования = ЦеныНоменклатурыБ.ОбъектЦенообразования
		ЛЕВОЕ СОЕДИНЕНИЕ ВидЦеныПравила КАК ВидЦеныПравила
		ПО (ИСТИНА)
		ЛЕВОЕ СОЕДИНЕНИЕ ЦеновыеГруппыПравила КАК ЦеновыеГруппыПравила
		ПО ТаблицаЦен1.Номенклатура.ЦеноваяГруппа = ЦеновыеГруппыПравила.ЦеноваяГруппа
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ИзмененияЦен.Магазин КАК Магазин,
	ИзмененияЦен.Период КАК Период,
	ИзмененияЦен.Регистратор КАК Регистратор,
	ИзмененияЦен.Номенклатура КАК Номенклатура,
	ИзмененияЦен.Характеристика КАК Характеристика,
	ИзмененияЦен.Цена КАК Цена,
	ИзмененияЦен.СтараяЦена КАК СтараяЦена,
	ИзмененияЦен.Дельта КАК Дельта,
	ИзмененияЦен.ВидЦен КАК ВидЦен
ПОМЕСТИТЬ АктуальныеИзмененияЦен
ИЗ
	ИзмененияЦен КАК ИзмененияЦен
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ФильтрУстановкиЦен КАК ФильтрУстановкиЦен
		ПО ИзмененияЦен.Номенклатура = ФильтрУстановкиЦен.Номенклатура
			И ИзмененияЦен.Характеристика = ФильтрУстановкиЦен.Характеристика
			И ИзмененияЦен.Период &gt;= ФильтрУстановкиЦен.ПериодДействияС
			И ИзмененияЦен.Период &lt; ФильтрУстановкиЦен.ПериодДействияДо
			И ИзмененияЦен.ВидЦен = ФильтрУстановкиЦен.ВидЦен

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	ИзмененияЦен.Магазин,
	ИзмененияЦен.Период,
	ИзмененияЦен.Регистратор,
	ИзмененияЦен.Номенклатура,
	ИзмененияЦен.Характеристика,
	ИзмененияЦен.Цена,
	ИзмененияЦен.СтараяЦена,
	ИзмененияЦен.Дельта,
	ИзмененияЦен.ВидЦен
ИЗ
	ИзмененияЦен КАК ИзмененияЦен
ГДЕ
	НЕ &amp;ИспользоватьАссортимент
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ИзмененияАссортимента.Период КАК Период,
	ИзмененияАссортимента.Регистратор КАК Регистратор,
	ИзмененияАссортимента.Номенклатура КАК Номенклатура,
	ЕСТЬNULL(ХарактеристикиНоменклатуры.Ссылка, ЗНАЧЕНИЕ(Справочник.ХарактеристикиНоменклатуры.ПустаяСсылка)) КАК Характеристика,
	ИзмененияАссортимента.ВидЦен КАК ВидЦен,
	ЕСТЬNULL(АссортиментНоменклатуры.ВидЦен, ЕСТЬNULL(ЦеновыеГруппыПравила.ВидЦен, ВидЦеныПравила.ВидЦен)) КАК ВидЦенДоИзменения
ПОМЕСТИТЬ ВсеИзмененияАссортимента
ИЗ
	(ВЫБРАТЬ
		МАКСИМУМ(Ассортимент.Период) КАК Период,
		МАКСИМУМ(АссортиментДоИзменения.Период) КАК ДатаПрошлогоИзменения,
		Ассортимент.Регистратор КАК Регистратор,
		Ассортимент.Номенклатура КАК Номенклатура,
		Ассортимент.ВидЦен КАК ВидЦен
	ИЗ
		АссортиментНоменклатуры КАК Ассортимент
			ЛЕВОЕ СОЕДИНЕНИЕ АссортиментНоменклатуры КАК АссортиментДоИзменения
			ПО Ассортимент.Период &gt; АссортиментДоИзменения.Период
				И Ассортимент.Номенклатура = АссортиментДоИзменения.Номенклатура
	
	СГРУППИРОВАТЬ ПО
		Ассортимент.Регистратор,
		Ассортимент.ВидЦен,
		Ассортимент.Номенклатура) КАК ИзмененияАссортимента
		ЛЕВОЕ СОЕДИНЕНИЕ АссортиментНоменклатуры КАК АссортиментНоменклатуры
		ПО ИзмененияАссортимента.ДатаПрошлогоИзменения = АссортиментНоменклатуры.Период
			И ИзмененияАссортимента.Номенклатура = АссортиментНоменклатуры.Номенклатура
		ЛЕВОЕ СОЕДИНЕНИЕ ЦеновыеГруппыПравила КАК ЦеновыеГруппыПравила
		ПО ИзмененияАссортимента.Номенклатура.ЦеноваяГруппа = ЦеновыеГруппыПравила.ЦеноваяГруппа
		ЛЕВОЕ СОЕДИНЕНИЕ ВидЦеныПравила КАК ВидЦеныПравила
		ПО (ИСТИНА)
		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.ХарактеристикиНоменклатуры КАК ХарактеристикиНоменклатуры
		ПО ИзмененияАссортимента.Номенклатура = ХарактеристикиНоменклатуры.Владелец
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ДОБАВИТЬКДАТЕ(&amp;НачалоПериода, СЕКУНДА, -1) КАК Период,
	NULL КАК Регистратор,
	ТоварыОрганизацийОстатки.Номенклатура КАК Номенклатура,
	ТоварыОрганизацийОстатки.Характеристика КАК Характеристика,
	ТоварыОрганизацийОстатки.Склад КАК Склад,
	ТоварыОрганизацийОстатки.Организация КАК Организация,
	ТоварыОрганизацийОстатки.КоличествоОстаток КАК КоличествоНачальныйОстаток,
	0 КАК КоличествоПриход,
	0 КАК КоличествоРасход,
	0 КАК КоличествоКонечныйОстаток
ПОМЕСТИТЬ ТаблицаНачальныйОстаток
ИЗ
	РегистрНакопления.ТоварыОрганизаций.Остатки(
			&amp;НачалоПериода,
			(Номенклатура, Склад, Характеристика) В
				(ВЫБРАТЬ РАЗЛИЧНЫЕ
					ОстаткиИОбороты.Номенклатура КАК Номенклатура,
					ОстаткиИОбороты.Склад КАК Склад,
					ОстаткиИОбороты.Характеристика КАК Характеристика
				ИЗ
					ОстаткиИОбороты КАК ОстаткиИОбороты)) КАК ТоварыОрганизацийОстатки
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ТоварыОрганизацийОбороты.ПериодСекунда КАК Период,
	ТоварыОрганизацийОбороты.Регистратор КАК Регистратор,
	ТоварыОрганизацийОбороты.Номенклатура КАК Номенклатура,
	ТоварыОрганизацийОбороты.Характеристика КАК Характеристика,
	ТоварыОрганизацийОбороты.Склад КАК Склад,
	ТоварыОрганизацийОбороты.Организация КАК Организация,
	0 КАК КоличествоНачальныйОстаток,
	ТоварыОрганизацийОбороты.КоличествоПриход КАК КоличествоПриход,
	0 КАК КоличествоРасход,
	0 КАК КоличествоКонечныйОстаток
ПОМЕСТИТЬ ТаблицаПриход
ИЗ
	РегистрНакопления.ТоварыОрганизаций.Обороты(
			&amp;НачалоПериода,
			&amp;КонецПериода,
			Авто,
			(Номенклатура, Склад, Характеристика) В
				(ВЫБРАТЬ РАЗЛИЧНЫЕ
					ОстаткиИОбороты.Номенклатура КАК Номенклатура,
					ОстаткиИОбороты.Склад КАК Склад,
					ОстаткиИОбороты.Характеристика КАК Характеристика
				ИЗ
					ОстаткиИОбороты КАК ОстаткиИОбороты)) КАК ТоварыОрганизацийОбороты
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ТоварыОрганизацийОбороты.ПериодСекунда КАК Период,
	ТоварыОрганизацийОбороты.Регистратор КАК Регистратор,
	ТоварыОрганизацийОбороты.Номенклатура КАК Номенклатура,
	ТоварыОрганизацийОбороты.Характеристика КАК Характеристика,
	ТоварыОрганизацийОбороты.Склад КАК Склад,
	ТоварыОрганизацийОбороты.Организация КАК Организация,
	0 КАК КоличествоНачальныйОстаток,
	0 КАК КоличествоПриход,
	ТоварыОрганизацийОбороты.КоличествоРасход КАК КоличествоРасход,
	0 КАК КоличествоКонечныйОстаток
ПОМЕСТИТЬ ТаблицаРасход
ИЗ
	РегистрНакопления.ТоварыОрганизаций.Обороты(
			&amp;НачалоПериода,
			&amp;КонецПериода,
			Авто,
			(Номенклатура, Склад, Характеристика) В
				(ВЫБРАТЬ РАЗЛИЧНЫЕ
					ОстаткиИОбороты.Номенклатура КАК Номенклатура,
					ОстаткиИОбороты.Склад КАК Склад,
					ОстаткиИОбороты.Характеристика КАК Характеристика
				ИЗ
					ОстаткиИОбороты КАК ОстаткиИОбороты)) КАК ТоварыОрганизацийОбороты
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	&amp;КонецПериода КАК Период,
	NULL КАК Регистратор,
	ТоварыОрганизацийОстатки.Номенклатура КАК Номенклатура,
	ТоварыОрганизацийОстатки.Характеристика КАК Характеристика,
	ТоварыОрганизацийОстатки.Склад КАК Склад,
	ТоварыОрганизацийОстатки.Организация КАК Организация,
	0 КАК КоличествоНачальныйОстаток,
	0 КАК КоличествоПриход,
	0 КАК КоличествоРасход,
	ТоварыОрганизацийОстатки.КоличествоОстаток КАК КоличествоКонечныйОстаток
ПОМЕСТИТЬ ТаблицаКонечныйОстаток
ИЗ
	РегистрНакопления.ТоварыОрганизаций.Остатки(
			&amp;КонецПериодаГраница,
			(Номенклатура, Склад, Характеристика) В
				(ВЫБРАТЬ РАЗЛИЧНЫЕ
					ОстаткиИОбороты.Номенклатура КАК Номенклатура,
					ОстаткиИОбороты.Склад КАК Склад,
					ОстаткиИОбороты.Характеристика КАК Характеристика
				ИЗ
					ОстаткиИОбороты КАК ОстаткиИОбороты)) КАК ТоварыОрганизацийОстатки
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	&amp;Магазин КАК Магазин,
	ИзмененияВидовЦенАссортимента.Период КАК Период,
	ИзмененияВидовЦенАссортимента.Регистратор КАК Регистратор,
	ИзмененияВидовЦенАссортимента.Номенклатура КАК Номенклатура,
	ИзмененияВидовЦенАссортимента.Характеристика КАК Характеристика,
	ЕСТЬNULL(ИзмененияЦен.Цена, 0) КАК Цена,
	ЕСТЬNULL(ИзмененияЦенДоИзмененияАссортимента.Цена, 0) КАК СтараяЦена,
	ЕСТЬNULL(ИзмененияЦен.Цена, 0) - ЕСТЬNULL(ИзмененияЦенДоИзмененияАссортимента.Цена, 0) КАК Дельта,
	ИзмененияВидовЦенАссортимента.ВидЦен КАК ВидЦен
ПОМЕСТИТЬ ВсеАктуальныеИзмененияЦен
ИЗ
	(ВЫБРАТЬ
		ИзменениеАссортимента.Период КАК Период,
		ИзменениеАссортимента.Регистратор КАК Регистратор,
		ИзменениеАссортимента.Номенклатура КАК Номенклатура,
		ИзменениеАссортимента.Характеристика КАК Характеристика,
		ИзменениеАссортимента.ВидЦен КАК ВидЦен,
		МАКСИМУМ(ИзменениеЦен.Период) КАК ПериодИзмененияЦеныПоВидуЦены,
		ИзменениеАссортимента.ВидЦенДоИзменения КАК ВидЦенДоИзменения,
		МАКСИМУМ(ИзменениеЦенДоИзмененияАссортимента.Период) КАК ПериодИзмененияЦеныПоВидуЦеныДоИзменения
	ИЗ
		ВсеИзмененияАссортимента КАК ИзменениеАссортимента
			ЛЕВОЕ СОЕДИНЕНИЕ ИзмененияЦен КАК ИзменениеЦен
			ПО ИзменениеАссортимента.Номенклатура = ИзменениеЦен.Номенклатура
				И ИзменениеАссортимента.Период &gt; ИзменениеЦен.Период
				И ИзменениеАссортимента.ВидЦен = ИзменениеЦен.ВидЦен
			ЛЕВОЕ СОЕДИНЕНИЕ ИзмененияЦен КАК ИзменениеЦенДоИзмененияАссортимента
			ПО ИзменениеАссортимента.Номенклатура = ИзменениеЦенДоИзмененияАссортимента.Номенклатура
				И ИзменениеАссортимента.Период &gt; ИзменениеЦенДоИзмененияАссортимента.Период
				И ИзменениеАссортимента.ВидЦенДоИзменения = ИзменениеЦенДоИзмененияАссортимента.ВидЦен
	
	СГРУППИРОВАТЬ ПО
		ИзменениеАссортимента.Регистратор,
		ИзменениеАссортимента.Номенклатура,
		ИзменениеАссортимента.ВидЦен,
		ИзменениеАссортимента.ВидЦенДоИзменения,
		ИзменениеАссортимента.Период,
		ИзменениеАссортимента.Характеристика) КАК ИзмененияВидовЦенАссортимента
		ЛЕВОЕ СОЕДИНЕНИЕ ИзмененияЦен КАК ИзмененияЦен
		ПО ИзмененияВидовЦенАссортимента.Номенклатура = ИзмененияЦен.Номенклатура
			И ИзмененияВидовЦенАссортимента.Характеристика = ИзмененияЦен.Характеристика
			И ИзмененияВидовЦенАссортимента.ВидЦен = ИзмененияЦен.ВидЦен
			И ИзмененияВидовЦенАссортимента.ПериодИзмененияЦеныПоВидуЦены = ИзмененияЦен.Период
		ЛЕВОЕ СОЕДИНЕНИЕ ИзмененияЦен КАК ИзмененияЦенДоИзмененияАссортимента
		ПО ИзмененияВидовЦенАссортимента.Номенклатура = ИзмененияЦенДоИзмененияАссортимента.Номенклатура
			И ИзмененияВидовЦенАссортимента.Характеристика = ИзмененияЦенДоИзмененияАссортимента.Характеристика
			И ИзмененияВидовЦенАссортимента.ВидЦенДоИзменения = ИзмененияЦенДоИзмененияАссортимента.ВидЦен
			И ИзмененияВидовЦенАссортимента.ПериодИзмененияЦеныПоВидуЦеныДоИзменения = ИзмененияЦенДоИзмененияАссортимента.Период
ГДЕ
	&amp;ИспользоватьАссортимент

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	АктуальныеИзмененияЦен.Магазин,
	АктуальныеИзмененияЦен.Период,
	АктуальныеИзмененияЦен.Регистратор,
	АктуальныеИзмененияЦен.Номенклатура,
	АктуальныеИзмененияЦен.Характеристика,
	АктуальныеИзмененияЦен.Цена,
	АктуальныеИзмененияЦен.СтараяЦена,
	АктуальныеИзмененияЦен.Дельта,
	АктуальныеИзмененияЦен.ВидЦен
ИЗ
	АктуальныеИзмененияЦен КАК АктуальныеИзмененияЦен
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ТаблицаНачальныйОстаток.Период КАК Период,
	ТаблицаНачальныйОстаток.Регистратор КАК Регистратор,
	ТаблицаНачальныйОстаток.Номенклатура КАК Номенклатура,
	ТаблицаНачальныйОстаток.Характеристика КАК Характеристика,
	ТаблицаНачальныйОстаток.Склад КАК Склад,
	ТаблицаНачальныйОстаток.Организация КАК Организация,
	ТаблицаНачальныйОстаток.КоличествоНачальныйОстаток КАК КоличествоНачальныйОстаток,
	ТаблицаНачальныйОстаток.КоличествоПриход КАК КоличествоПриход,
	ТаблицаНачальныйОстаток.КоличествоРасход КАК КоличествоРасход,
	ТаблицаНачальныйОстаток.КоличествоКонечныйОстаток КАК КоличествоКонечныйОстаток,
	МАКСИМУМ(ВсеАктуальныеИзмененияЦен.Период) КАК ПериодМаксимум
ПОМЕСТИТЬ МаксимумНачальныйОстаток
ИЗ
	ТаблицаНачальныйОстаток КАК ТаблицаНачальныйОстаток
		ЛЕВОЕ СОЕДИНЕНИЕ ВсеАктуальныеИзмененияЦен КАК ВсеАктуальныеИзмененияЦен
		ПО ТаблицаНачальныйОстаток.Номенклатура = ВсеАктуальныеИзмененияЦен.Номенклатура
			И ТаблицаНачальныйОстаток.Характеристика = ВсеАктуальныеИзмененияЦен.Характеристика
			И ТаблицаНачальныйОстаток.Склад.Магазин = ВсеАктуальныеИзмененияЦен.Магазин
			И ТаблицаНачальныйОстаток.Период &gt;= ВсеАктуальныеИзмененияЦен.Период

СГРУППИРОВАТЬ ПО
	ТаблицаНачальныйОстаток.Период,
	ТаблицаНачальныйОстаток.Регистратор,
	ТаблицаНачальныйОстаток.Номенклатура,
	ТаблицаНачальныйОстаток.Характеристика,
	ТаблицаНачальныйОстаток.Склад,
	ТаблицаНачальныйОстаток.Организация,
	ТаблицаНачальныйОстаток.КоличествоНачальныйОстаток,
	ТаблицаНачальныйОстаток.КоличествоПриход,
	ТаблицаНачальныйОстаток.КоличествоРасход,
	ТаблицаНачальныйОстаток.КоличествоКонечныйОстаток
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ТаблицаПриход.Период КАК Период,
	ТаблицаПриход.Регистратор КАК Регистратор,
	ТаблицаПриход.Номенклатура КАК Номенклатура,
	ТаблицаПриход.Характеристика КАК Характеристика,
	ТаблицаПриход.Склад КАК Склад,
	ТаблицаПриход.Организация КАК Организация,
	ТаблицаПриход.КоличествоНачальныйОстаток КАК КоличествоНачальныйОстаток,
	ТаблицаПриход.КоличествоПриход КАК КоличествоПриход,
	ТаблицаПриход.КоличествоРасход КАК КоличествоРасход,
	ТаблицаПриход.КоличествоКонечныйОстаток КАК КоличествоКонечныйОстаток,
	МАКСИМУМ(ВсеАктуальныеИзмененияЦен.Период) КАК ПериодМаксимум
ПОМЕСТИТЬ МаксимумПриход
ИЗ
	ТаблицаПриход КАК ТаблицаПриход
		ЛЕВОЕ СОЕДИНЕНИЕ ВсеАктуальныеИзмененияЦен КАК ВсеАктуальныеИзмененияЦен
		ПО ТаблицаПриход.Номенклатура = ВсеАктуальныеИзмененияЦен.Номенклатура
			И ТаблицаПриход.Характеристика = ВсеАктуальныеИзмененияЦен.Характеристика
			И ТаблицаПриход.Склад.Магазин = ВсеАктуальныеИзмененияЦен.Магазин
			И ТаблицаПриход.Период &gt;= ВсеАктуальныеИзмененияЦен.Период

СГРУППИРОВАТЬ ПО
	ТаблицаПриход.Период,
	ТаблицаПриход.Регистратор,
	ТаблицаПриход.Номенклатура,
	ТаблицаПриход.Характеристика,
	ТаблицаПриход.Склад,
	ТаблицаПриход.Организация,
	ТаблицаПриход.КоличествоНачальныйОстаток,
	ТаблицаПриход.КоличествоПриход,
	ТаблицаПриход.КоличествоРасход,
	ТаблицаПриход.КоличествоКонечныйОстаток
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ТаблицаРасход.Период КАК Период,
	ТаблицаРасход.Регистратор КАК Регистратор,
	ТаблицаРасход.Номенклатура КАК Номенклатура,
	ТаблицаРасход.Характеристика КАК Характеристика,
	ТаблицаРасход.Склад КАК Склад,
	ТаблицаРасход.Организация КАК Организация,
	ТаблицаРасход.КоличествоНачальныйОстаток КАК КоличествоНачальныйОстаток,
	ТаблицаРасход.КоличествоПриход КАК КоличествоПриход,
	ТаблицаРасход.КоличествоРасход КАК КоличествоРасход,
	ТаблицаРасход.КоличествоКонечныйОстаток КАК КоличествоКонечныйОстаток,
	МАКСИМУМ(ВсеАктуальныеИзмененияЦен.Период) КАК ПериодМаксимум
ПОМЕСТИТЬ МаксимумРасход
ИЗ
	ТаблицаРасход КАК ТаблицаРасход
		ЛЕВОЕ СОЕДИНЕНИЕ ВсеАктуальныеИзмененияЦен КАК ВсеАктуальныеИзмененияЦен
		ПО ТаблицаРасход.Номенклатура = ВсеАктуальныеИзмененияЦен.Номенклатура
			И ТаблицаРасход.Характеристика = ВсеАктуальныеИзмененияЦен.Характеристика
			И ТаблицаРасход.Склад.Магазин = ВсеАктуальныеИзмененияЦен.Магазин
			И ТаблицаРасход.Период &gt;= ВсеАктуальныеИзмененияЦен.Период

СГРУППИРОВАТЬ ПО
	ТаблицаРасход.Период,
	ТаблицаРасход.Регистратор,
	ТаблицаРасход.Номенклатура,
	ТаблицаРасход.Характеристика,
	ТаблицаРасход.Склад,
	ТаблицаРасход.Организация,
	ТаблицаРасход.КоличествоНачальныйОстаток,
	ТаблицаРасход.КоличествоПриход,
	ТаблицаРасход.КоличествоРасход,
	ТаблицаРасход.КоличествоКонечныйОстаток
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ТаблицаКонечныйОстаток.Период КАК Период,
	ТаблицаКонечныйОстаток.Регистратор КАК Регистратор,
	ТаблицаКонечныйОстаток.Номенклатура КАК Номенклатура,
	ТаблицаКонечныйОстаток.Характеристика КАК Характеристика,
	ТаблицаКонечныйОстаток.Склад КАК Склад,
	ТаблицаКонечныйОстаток.Организация КАК Организация,
	ТаблицаКонечныйОстаток.КоличествоНачальныйОстаток КАК КоличествоНачальныйОстаток,
	ТаблицаКонечныйОстаток.КоличествоПриход КАК КоличествоПриход,
	ТаблицаКонечныйОстаток.КоличествоРасход КАК КоличествоРасход,
	ТаблицаКонечныйОстаток.КоличествоКонечныйОстаток КАК КоличествоКонечныйОстаток,
	МАКСИМУМ(ВсеАктуальныеИзмененияЦен.Период) КАК ПериодМаксимум
ПОМЕСТИТЬ МаксимумКонечныйОстаток
ИЗ
	ТаблицаКонечныйОстаток КАК ТаблицаКонечныйОстаток
		ЛЕВОЕ СОЕДИНЕНИЕ ВсеАктуальныеИзмененияЦен КАК ВсеАктуальныеИзмененияЦен
		ПО ТаблицаКонечныйОстаток.Номенклатура = ВсеАктуальныеИзмененияЦен.Номенклатура
			И ТаблицаКонечныйОстаток.Характеристика = ВсеАктуальныеИзмененияЦен.Характеристика
			И ТаблицаКонечныйОстаток.Склад.Магазин = ВсеАктуальныеИзмененияЦен.Магазин
			И ТаблицаКонечныйОстаток.Период &gt;= ВсеАктуальныеИзмененияЦен.Период

СГРУППИРОВАТЬ ПО
	ТаблицаКонечныйОстаток.Период,
	ТаблицаКонечныйОстаток.Регистратор,
	ТаблицаКонечныйОстаток.Номенклатура,
	ТаблицаКонечныйОстаток.Характеристика,
	ТаблицаКонечныйОстаток.Склад,
	ТаблицаКонечныйОстаток.Организация,
	ТаблицаКонечныйОстаток.КоличествоНачальныйОстаток,
	ТаблицаКонечныйОстаток.КоличествоПриход,
	ТаблицаКонечныйОстаток.КоличествоРасход,
	ТаблицаКонечныйОстаток.КоличествоКонечныйОстаток
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	МаксимумНачальныйОстаток.Период КАК Период,
	МаксимумНачальныйОстаток.Регистратор КАК Регистратор,
	МаксимумНачальныйОстаток.Номенклатура КАК Номенклатура,
	МаксимумНачальныйОстаток.Характеристика КАК Характеристика,
	МаксимумНачальныйОстаток.Склад КАК Склад,
	МаксимумНачальныйОстаток.Организация КАК Организация,
	МаксимумНачальныйОстаток.КоличествоНачальныйОстаток КАК КоличествоНачальныйОстаток,
	МаксимумНачальныйОстаток.КоличествоПриход КАК КоличествоПриход,
	МаксимумНачальныйОстаток.КоличествоРасход КАК КоличествоРасход,
	МаксимумНачальныйОстаток.КоличествоКонечныйОстаток КАК КоличествоКонечныйОстаток,
	ЕСТЬNULL(ВсеАктуальныеИзмененияЦен.Цена * МаксимумНачальныйОстаток.КоличествоНачальныйОстаток, 0) КАК СуммаНачальныйОстаток,
	0 КАК СуммаПриход,
	0 КАК СуммаРасход,
	0 КАК СуммаКонечныйОстаток
ПОМЕСТИТЬ ТаблицаИтог
ИЗ
	МаксимумНачальныйОстаток КАК МаксимумНачальныйОстаток
		ЛЕВОЕ СОЕДИНЕНИЕ ВсеАктуальныеИзмененияЦен КАК ВсеАктуальныеИзмененияЦен
		ПО МаксимумНачальныйОстаток.Номенклатура = ВсеАктуальныеИзмененияЦен.Номенклатура
			И МаксимумНачальныйОстаток.Характеристика = ВсеАктуальныеИзмененияЦен.Характеристика
			И МаксимумНачальныйОстаток.Склад.Магазин = ВсеАктуальныеИзмененияЦен.Магазин
			И МаксимумНачальныйОстаток.ПериодМаксимум = ВсеАктуальныеИзмененияЦен.Период

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	МаксимумПриход.Период,
	МаксимумПриход.Регистратор,
	МаксимумПриход.Номенклатура,
	МаксимумПриход.Характеристика,
	МаксимумПриход.Склад,
	МаксимумПриход.Организация,
	МаксимумПриход.КоличествоНачальныйОстаток,
	МаксимумПриход.КоличествоПриход,
	МаксимумПриход.КоличествоРасход,
	МаксимумПриход.КоличествоКонечныйОстаток,
	0,
	ЕСТЬNULL(ВсеАктуальныеИзмененияЦен.Цена * МаксимумПриход.КоличествоПриход, 0),
	0,
	0
ИЗ
	МаксимумПриход КАК МаксимумПриход
		ЛЕВОЕ СОЕДИНЕНИЕ ВсеАктуальныеИзмененияЦен КАК ВсеАктуальныеИзмененияЦен
		ПО МаксимумПриход.Номенклатура = ВсеАктуальныеИзмененияЦен.Номенклатура
			И МаксимумПриход.Характеристика = ВсеАктуальныеИзмененияЦен.Характеристика
			И МаксимумПриход.Склад.Магазин = ВсеАктуальныеИзмененияЦен.Магазин
			И МаксимумПриход.ПериодМаксимум = ВсеАктуальныеИзмененияЦен.Период

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	МаксимумРасход.Период,
	МаксимумРасход.Регистратор,
	МаксимумРасход.Номенклатура,
	МаксимумРасход.Характеристика,
	МаксимумРасход.Склад,
	МаксимумРасход.Организация,
	МаксимумРасход.КоличествоНачальныйОстаток,
	МаксимумРасход.КоличествоПриход,
	МаксимумРасход.КоличествоРасход,
	МаксимумРасход.КоличествоКонечныйОстаток,
	0,
	0,
	ЕСТЬNULL(ВсеАктуальныеИзмененияЦен.Цена * МаксимумРасход.КоличествоРасход, 0),
	0
ИЗ
	МаксимумРасход КАК МаксимумРасход
		ЛЕВОЕ СОЕДИНЕНИЕ ВсеАктуальныеИзмененияЦен КАК ВсеАктуальныеИзмененияЦен
		ПО МаксимумРасход.Номенклатура = ВсеАктуальныеИзмененияЦен.Номенклатура
			И МаксимумРасход.Характеристика = ВсеАктуальныеИзмененияЦен.Характеристика
			И МаксимумРасход.Склад.Магазин = ВсеАктуальныеИзмененияЦен.Магазин
			И МаксимумРасход.ПериодМаксимум = ВсеАктуальныеИзмененияЦен.Период

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	МаксимумКонечныйОстаток.Период,
	МаксимумКонечныйОстаток.Регистратор,
	МаксимумКонечныйОстаток.Номенклатура,
	МаксимумКонечныйОстаток.Характеристика,
	МаксимумКонечныйОстаток.Склад,
	МаксимумКонечныйОстаток.Организация,
	МаксимумКонечныйОстаток.КоличествоНачальныйОстаток,
	МаксимумКонечныйОстаток.КоличествоПриход,
	МаксимумКонечныйОстаток.КоличествоРасход,
	МаксимумКонечныйОстаток.КоличествоКонечныйОстаток,
	0,
	0,
	0,
	ЕСТЬNULL(ВсеАктуальныеИзмененияЦен.Цена * МаксимумКонечныйОстаток.КоличествоКонечныйОстаток, 0)
ИЗ
	МаксимумКонечныйОстаток КАК МаксимумКонечныйОстаток
		ЛЕВОЕ СОЕДИНЕНИЕ ВсеАктуальныеИзмененияЦен КАК ВсеАктуальныеИзмененияЦен
		ПО МаксимумКонечныйОстаток.Номенклатура = ВсеАктуальныеИзмененияЦен.Номенклатура
			И МаксимумКонечныйОстаток.Характеристика = ВсеАктуальныеИзмененияЦен.Характеристика
			И МаксимумКонечныйОстаток.Склад.Магазин = ВсеАктуальныеИзмененияЦен.Магазин
			И МаксимумКонечныйОстаток.ПериодМаксимум = ВсеАктуальныеИзмененияЦен.Период
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ТаблицаИтог.Период КАК ПериодСекунда,
	НАЧАЛОПЕРИОДА(ТаблицаИтог.Период, МИНУТА) КАК ПериодМинута,
	НАЧАЛОПЕРИОДА(ТаблицаИтог.Период, ЧАС) КАК ПериодЧас,
	НАЧАЛОПЕРИОДА(ТаблицаИтог.Период, ДЕНЬ) КАК ПериодДень,
	НАЧАЛОПЕРИОДА(ТаблицаИтог.Период, НЕДЕЛЯ) КАК ПериодНеделя,
	НАЧАЛОПЕРИОДА(ТаблицаИтог.Период, МЕСЯЦ) КАК ПериодМесяц,
	НАЧАЛОПЕРИОДА(ТаблицаИтог.Период, КВАРТАЛ) КАК ПериодКвартал,
	НАЧАЛОПЕРИОДА(ТаблицаИтог.Период, ГОД) КАК ПериодГод,
	ТаблицаИтог.Регистратор КАК Регистратор,
	ТаблицаИтог.Склад КАК Склад,
	ТаблицаИтог.Номенклатура КАК Номенклатура,
	ТаблицаИтог.Характеристика КАК Характеристика,
	ТаблицаИтог.КоличествоНачальныйОстаток КАК КоличествоНачальныйОстаток,
	ТаблицаИтог.КоличествоПриход КАК КоличествоПриход,
	ТаблицаИтог.КоличествоРасход КАК КоличествоРасход,
	ТаблицаИтог.КоличествоКонечныйОстаток КАК КоличествоКонечныйОстаток,
	ТаблицаИтог.СуммаНачальныйОстаток КАК СуммаНачальныйОстаток,
	ТаблицаИтог.СуммаПриход КАК СуммаПриход,
	ТаблицаИтог.СуммаРасход КАК СуммаРасход,
	ТаблицаИтог.СуммаКонечныйОстаток КАК СуммаКонечныйОстаток
ИЗ
	ТаблицаИтог КАК ТаблицаИтог

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	БлижайшиеОстаткиПоНоменклатуре.Период,
	НАЧАЛОПЕРИОДА(БлижайшиеОстаткиПоНоменклатуре.Период, МИНУТА),
	НАЧАЛОПЕРИОДА(БлижайшиеОстаткиПоНоменклатуре.Период, ЧАС),
	НАЧАЛОПЕРИОДА(БлижайшиеОстаткиПоНоменклатуре.Период, ДЕНЬ),
	НАЧАЛОПЕРИОДА(БлижайшиеОстаткиПоНоменклатуре.Период, НЕДЕЛЯ),
	НАЧАЛОПЕРИОДА(БлижайшиеОстаткиПоНоменклатуре.Период, МЕСЯЦ),
	НАЧАЛОПЕРИОДА(БлижайшиеОстаткиПоНоменклатуре.Период, КВАРТАЛ),
	НАЧАЛОПЕРИОДА(БлижайшиеОстаткиПоНоменклатуре.Период, ГОД),
	БлижайшиеОстаткиПоНоменклатуре.Регистратор,
	БлижайшиеОстаткиПоНоменклатуре.Склад,
	БлижайшиеОстаткиПоНоменклатуре.Номенклатура,
	БлижайшиеОстаткиПоНоменклатуре.Характеристика,
	ЕСТЬNULL(ТоварыОрганизацийОстаткиИОбороты.КоличествоКонечныйОстаток, 0),
	0,
	0,
	ЕСТЬNULL(ТоварыОрганизацийОстаткиИОбороты.КоличествоКонечныйОстаток, 0),
	ЕСТЬNULL(БлижайшиеОстаткиПоНоменклатуре.СтараяЦена * ТоварыОрганизацийОстаткиИОбороты.КоличествоКонечныйОстаток, 0),
	ВЫБОР
		КОГДА БлижайшиеОстаткиПоНоменклатуре.Дельта &gt; 0
			ТОГДА ЕСТЬNULL(БлижайшиеОстаткиПоНоменклатуре.Дельта * ТоварыОрганизацийОстаткиИОбороты.КоличествоКонечныйОстаток, 0)
		ИНАЧЕ 0
	КОНЕЦ,
	ВЫБОР
		КОГДА БлижайшиеОстаткиПоНоменклатуре.Дельта &lt; 0
			ТОГДА ЕСТЬNULL(-БлижайшиеОстаткиПоНоменклатуре.Дельта * ТоварыОрганизацийОстаткиИОбороты.КоличествоКонечныйОстаток, 0)
		ИНАЧЕ 0
	КОНЕЦ,
	ЕСТЬNULL(БлижайшиеОстаткиПоНоменклатуре.Цена * ТоварыОрганизацийОстаткиИОбороты.КоличествоКонечныйОстаток, 0)
ИЗ
	(ВЫБРАТЬ
		ИзмененияЦен.Период КАК Период,
		ИзмененияЦен.Регистратор КАК Регистратор,
		ИзмененияЦен.Дельта КАК Дельта,
		ИзмененияЦен.Цена КАК Цена,
		ИзмененияЦен.СтараяЦена КАК СтараяЦена,
		ИзмененияЦен.Номенклатура КАК Номенклатура,
		ИзмененияЦен.Характеристика КАК Характеристика,
		ТоварыОрганизацийОстаткиИОбороты.Склад КАК Склад,
		МАКСИМУМ(ТоварыОрганизацийОстаткиИОбороты.Период) КАК ПериодМаксимум
	ИЗ
		ВсеАктуальныеИзмененияЦен КАК ИзмененияЦен
			ЛЕВОЕ СОЕДИНЕНИЕ ОстаткиИОбороты КАК ТоварыОрганизацийОстаткиИОбороты
			ПО ИзмененияЦен.Период &gt;= ТоварыОрганизацийОстаткиИОбороты.Период
				И ИзмененияЦен.Номенклатура = ТоварыОрганизацийОстаткиИОбороты.Номенклатура
				И ИзмененияЦен.Характеристика = ТоварыОрганизацийОстаткиИОбороты.Характеристика
				И ИзмененияЦен.Магазин = ТоварыОрганизацийОстаткиИОбороты.Склад.Магазин
	ГДЕ
		&amp;ИспользоватьАссортимент
	
	СГРУППИРОВАТЬ ПО
		ИзмененияЦен.Период,
		ИзмененияЦен.Регистратор,
		ИзмененияЦен.Дельта,
		ИзмененияЦен.Цена,
		ИзмененияЦен.СтараяЦена,
		ИзмененияЦен.Номенклатура,
		ТоварыОрганизацийОстаткиИОбороты.Склад,
		ИзмененияЦен.Характеристика
	
	ОБЪЕДИНИТЬ ВСЕ
	
	ВЫБРАТЬ
		ИзмененияЦен.Период,
		ИзмененияЦен.Регистратор,
		ИзмененияЦен.Дельта,
		ИзмененияЦен.Цена,
		ИзмененияЦен.СтараяЦена,
		ИзмененияЦен.Номенклатура,
		ИзмененияЦен.Характеристика,
		ТоварыОрганизацийОстаткиИОбороты.Склад,
		МАКСИМУМ(ТоварыОрганизацийОстаткиИОбороты.Период)
	ИЗ
		ВсеАктуальныеИзмененияЦен КАК ИзмененияЦен
			ЛЕВОЕ СОЕДИНЕНИЕ ОстаткиИОбороты КАК ТоварыОрганизацийОстаткиИОбороты
			ПО ИзмененияЦен.Период &gt;= ТоварыОрганизацийОстаткиИОбороты.Период
				И ИзмененияЦен.Номенклатура = ТоварыОрганизацийОстаткиИОбороты.Номенклатура
				И ИзмененияЦен.Характеристика = ТоварыОрганизацийОстаткиИОбороты.Характеристика
				И ИзмененияЦен.Магазин = ТоварыОрганизацийОстаткиИОбороты.Склад.Магазин
				И ИзмененияЦен.ВидЦен = ТоварыОрганизацийОстаткиИОбороты.ВидЦенПоУмолчанию
	ГДЕ
		НЕ &amp;ИспользоватьАссортимент
	
	СГРУППИРОВАТЬ ПО
		ИзмененияЦен.Период,
		ИзмененияЦен.Регистратор,
		ИзмененияЦен.Дельта,
		ИзмененияЦен.Цена,
		ИзмененияЦен.СтараяЦена,
		ИзмененияЦен.Номенклатура,
		ТоварыОрганизацийОстаткиИОбороты.Склад,
		ИзмененияЦен.Характеристика) КАК БлижайшиеОстаткиПоНоменклатуре
		ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
			ОстаткиИОбороты.Период КАК Период,
			ОстаткиИОбороты.Номенклатура КАК Номенклатура,
			ОстаткиИОбороты.Характеристика КАК Характеристика,
			ОстаткиИОбороты.Склад КАК Склад,
			МИНИМУМ(ОстаткиИОбороты.КоличествоКонечныйОстаток) КАК КоличествоКонечныйОстаток
		ИЗ
			ОстаткиИОбороты КАК ОстаткиИОбороты
		
		СГРУППИРОВАТЬ ПО
			ОстаткиИОбороты.Номенклатура,
			ОстаткиИОбороты.Характеристика,
			ОстаткиИОбороты.Склад,
			ОстаткиИОбороты.Период) КАК ТоварыОрганизацийОстаткиИОбороты
		ПО БлижайшиеОстаткиПоНоменклатуре.ПериодМаксимум = ТоварыОрганизацийОстаткиИОбороты.Период
			И БлижайшиеОстаткиПоНоменклатуре.Номенклатура = ТоварыОрганизацийОстаткиИОбороты.Номенклатура
			И БлижайшиеОстаткиПоНоменклатуре.Склад = ТоварыОрганизацийОстаткиИОбороты.Склад
			И БлижайшиеОстаткиПоНоменклатуре.Характеристика = ТоварыОрганизацийОстаткиИОбороты.Характеристика
ГДЕ
	ТоварыОрганизацийОстаткиИОбороты.КоличествоКонечныйОстаток &lt;&gt; 0
	И БлижайшиеОстаткиПоНоменклатуре.Период МЕЖДУ &amp;НачалоПериода И &amp;КонецПериода
{ГДЕ
	(ТоварыОрганизацийОстаткиИОбороты.Период &lt;= &amp;КонецПериода)}</query>
	</dataSet>
	<totalField>
		<dataPath>КоличествоКонечныйОстаток</dataPath>
		<expression>Сумма(КоличествоКонечныйОстаток)</expression>
	</totalField>
	<totalField>
		<dataPath>КоличествоНачальныйОстаток</dataPath>
		<expression>Сумма(КоличествоНачальныйОстаток)</expression>
	</totalField>
	<totalField>
		<dataPath>КоличествоПриход</dataPath>
		<expression>Сумма(КоличествоПриход)</expression>
	</totalField>
	<totalField>
		<dataPath>КоличествоРасход</dataPath>
		<expression>Сумма(КоличествоРасход)</expression>
	</totalField>
	<totalField>
		<dataPath>СуммаКонечныйОстаток</dataPath>
		<expression>Сумма(СуммаКонечныйОстаток)</expression>
	</totalField>
	<totalField>
		<dataPath>СуммаНачальныйОстаток</dataPath>
		<expression>Сумма(СуммаНачальныйОстаток)</expression>
	</totalField>
	<totalField>
		<dataPath>СуммаПриход</dataPath>
		<expression>Сумма(СуммаПриход)</expression>
	</totalField>
	<totalField>
		<dataPath>СуммаРасход</dataPath>
		<expression>Сумма(СуммаРасход)</expression>
	</totalField>
	<parameter>
		<name>НачалоПериода</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Начало периода</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>true</useRestriction>
		<expression>&amp;ПериодОтчета.ДатаНачала</expression>
		<availableAsField>false</availableAsField>
	</parameter>
	<parameter>
		<name>КонецПериода</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Конец периода</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>true</useRestriction>
		<expression>&amp;ПериодОтчета.ДатаОкончания</expression>
		<availableAsField>false</availableAsField>
	</parameter>
	<parameter>
		<name>ПериодОтчета</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Период отчета</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>v8:StandardPeriod</v8:Type>
		</valueType>
		<value xsi:type="v8:StandardPeriod">
			<v8:variant xsi:type="v8:StandardPeriodVariant">Custom</v8:variant>
			<v8:startDate>0001-01-01T00:00:00</v8:startDate>
			<v8:endDate>0001-01-01T00:00:00</v8:endDate>
		</value>
		<useRestriction>false</useRestriction>
	</parameter>
	<parameter>
		<name>Магазин</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Магазин</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type xmlns:d4p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d4p1:CatalogRef.Магазины</v8:Type>
		</valueType>
		<value xsi:type="dcscor:DesignTimeValue">Справочник.Магазины.ПустаяСсылка</value>
		<useRestriction>true</useRestriction>
	</parameter>
	<parameter>
		<name>ИспользоватьПрименениеЦен</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Использовать применение цен</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:boolean</v8:Type>
		</valueType>
		<value xsi:type="xs:boolean">false</value>
		<useRestriction>true</useRestriction>
	</parameter>
	<parameter>
		<name>ПравилоЦенообразования</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Правило ценообразования</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type xmlns:d4p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d4p1:CatalogRef.ПравилаЦенообразования</v8:Type>
		</valueType>
		<value xsi:type="dcscor:DesignTimeValue">Справочник.ПравилаЦенообразования.ПустаяСсылка</value>
		<useRestriction>true</useRestriction>
	</parameter>
	<parameter>
		<name>ОбъектПланирования</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Объект планирования</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type xmlns:d4p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d4p1:CatalogRef.ФорматыМагазинов</v8:Type>
		</valueType>
		<value xsi:nil="true"/>
		<useRestriction>true</useRestriction>
	</parameter>
	<parameter>
		<name>ИспользоватьАссортимент</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Использовать ассортимент</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:boolean</v8:Type>
		</valueType>
		<value xsi:type="xs:boolean">false</value>
		<useRestriction>true</useRestriction>
	</parameter>
	<parameter>
		<name>Регистратор</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Регистратор</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:TypeSet xmlns:d4p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d4p1:DocumentRef</v8:TypeSet>
		</valueType>
		<value xsi:nil="true"/>
		<useRestriction>false</useRestriction>
	</parameter>
	<parameter>
		<name>Период</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Период</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>false</useRestriction>
	</parameter>
	<parameter>
		<name>КонецПериодаГраница</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Конец периода граница</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>true</useRestriction>
	</parameter>
	<parameter>
		<name>Склад</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Склад</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type xmlns:d4p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d4p1:CatalogRef.Склады</v8:Type>
		</valueType>
		<value xsi:nil="true"/>
		<useRestriction>false</useRestriction>
	</parameter>
	<settingsVariant>
		<dcsset:name>Основной</dcsset:name>
		<dcsset:presentation xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Ведомость по товарам организаций в ценах номенклатуры</v8:content>
			</v8:item>
		</dcsset:presentation>
		<dcsset:settings xmlns:style="http://v8.1c.ru/8.1/data/ui/style" xmlns:sys="http://v8.1c.ru/8.1/data/ui/fonts/system" xmlns:web="http://v8.1c.ru/8.1/data/ui/colors/web" xmlns:win="http://v8.1c.ru/8.1/data/ui/colors/windows">
			<dcsset:selection>
				<dcsset:item xsi:type="dcsset:SelectedItemFolder">
					<dcsset:title>Начальный остаток</dcsset:title>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>КоличествоНачальныйОстаток</dcsset:field>
						<dcsset:title>Количество</dcsset:title>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>СуммаНачальныйОстаток</dcsset:field>
						<dcsset:title>Сумма</dcsset:title>
					</dcsset:item>
					<dcsset:placement>Auto</dcsset:placement>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemFolder">
					<dcsset:title>Приход</dcsset:title>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>КоличествоПриход</dcsset:field>
						<dcsset:title>Количество</dcsset:title>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>СуммаПриход</dcsset:field>
						<dcsset:title>Сумма</dcsset:title>
					</dcsset:item>
					<dcsset:placement>Auto</dcsset:placement>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemFolder">
					<dcsset:title>Расход</dcsset:title>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>КоличествоРасход</dcsset:field>
						<dcsset:title>Количество</dcsset:title>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>СуммаРасход</dcsset:field>
						<dcsset:title>Сумма</dcsset:title>
					</dcsset:item>
					<dcsset:placement>Auto</dcsset:placement>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemFolder">
					<dcsset:title>Конечный остаток</dcsset:title>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>КоличествоКонечныйОстаток</dcsset:field>
						<dcsset:title>Количество</dcsset:title>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>СуммаКонечныйОстаток</dcsset:field>
						<dcsset:title>Сумма</dcsset:title>
					</dcsset:item>
					<dcsset:placement>Auto</dcsset:placement>
				</dcsset:item>
				<dcsset:viewMode>Normal</dcsset:viewMode>
				<dcsset:userSettingID>339af16b-bc7f-4c25-921f-fa697775d944</dcsset:userSettingID>
			</dcsset:selection>
			<dcsset:filter>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">Склад</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:right xsi:type="dcscor:DesignTimeValue">Справочник.Склады.ПустаяСсылка</dcsset:right>
					<dcsset:userSettingID>e3b1dcfa-c382-4769-a460-cad6e3f8daa2</dcsset:userSettingID>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">Номенклатура</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:right xsi:type="dcscor:DesignTimeValue">Справочник.Номенклатура.ПустаяСсылка</dcsset:right>
					<dcsset:userSettingID>96aa64b5-39dc-4101-b3ae-e96b22e10060</dcsset:userSettingID>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">Организация</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:right xsi:type="dcscor:DesignTimeValue">Справочник.Организации.ПустаяСсылка</dcsset:right>
					<dcsset:userSettingID>a83b630b-0d1f-4f51-99e3-1762d4c4e2eb</dcsset:userSettingID>
				</dcsset:item>
				<dcsset:viewMode>Normal</dcsset:viewMode>
				<dcsset:userSettingID>6aad7574-5eb5-4dec-adc7-a2b91a0dac79</dcsset:userSettingID>
			</dcsset:filter>
			<dcsset:dataParameters>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ПериодОтчета</dcscor:parameter>
					<dcscor:value xsi:type="v8:StandardPeriod">
						<v8:variant xsi:type="v8:StandardPeriodVariant">ThisWeek</v8:variant>
					</dcscor:value>
					<dcsset:userSettingID>5c490af8-5509-4c53-af78-ec6bdc7319b4</dcsset:userSettingID>
				</dcscor:item>
			</dcsset:dataParameters>
			<dcsset:order>
				<dcsset:item xsi:type="dcsset:OrderItemField">
					<dcsset:field>ПериодСекунда</dcsset:field>
					<dcsset:orderType>Asc</dcsset:orderType>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:OrderItemField">
					<dcsset:field>Регистратор</dcsset:field>
					<dcsset:orderType>Asc</dcsset:orderType>
				</dcsset:item>
			</dcsset:order>
			<dcsset:outputParameters>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ГоризонтальноеРасположениеОбщихИтогов</dcscor:parameter>
					<dcscor:value xsi:type="dcscor:DataCompositionTotalPlacement">None</dcscor:value>
					<dcsset:userSettingID>17cc04e0-cfd6-4e65-8e16-0ab4b53ff480</dcsset:userSettingID>
					<dcsset:userSettingPresentation xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Показывать итоги по горизонтали</v8:content>
						</v8:item>
					</dcsset:userSettingPresentation>
				</dcscor:item>
			</dcsset:outputParameters>
			<dcsset:item xsi:type="dcsset:StructureItemTable">
				<dcsset:column>
					<dcsset:groupItems>
						<dcsset:item xsi:type="dcsset:GroupItemField">
							<dcsset:field>Склад</dcsset:field>
							<dcsset:groupType>Items</dcsset:groupType>
							<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
							<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
							<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
						</dcsset:item>
					</dcsset:groupItems>
					<dcsset:order>
						<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
					</dcsset:order>
					<dcsset:selection>
						<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
					</dcsset:selection>
				</dcsset:column>
				<dcsset:row>
					<dcsset:groupItems>
						<dcsset:item xsi:type="dcsset:GroupItemField">
							<dcsset:field>Номенклатура</dcsset:field>
							<dcsset:groupType>Items</dcsset:groupType>
							<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
							<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
							<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
						</dcsset:item>
						<dcsset:item xsi:type="dcsset:GroupItemField">
							<dcsset:field>Характеристика</dcsset:field>
							<dcsset:groupType>Items</dcsset:groupType>
							<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
							<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
							<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
						</dcsset:item>
						<dcsset:item xsi:type="dcsset:GroupItemField">
							<dcsset:field>Номенклатура.ЕдиницаИзмерения</dcsset:field>
							<dcsset:groupType>Items</dcsset:groupType>
							<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
							<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
							<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
						</dcsset:item>
					</dcsset:groupItems>
					<dcsset:order>
						<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
					</dcsset:order>
					<dcsset:selection>
						<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
						<dcsset:item xsi:type="dcsset:SelectedItemFolder">
							<dcsset:item xsi:type="dcsset:SelectedItemField">
								<dcsset:field>Номенклатура</dcsset:field>
							</dcsset:item>
							<dcsset:item xsi:type="dcsset:SelectedItemField">
								<dcsset:field>Характеристика</dcsset:field>
							</dcsset:item>
							<dcsset:item xsi:type="dcsset:SelectedItemField">
								<dcsset:field>Номенклатура.ЕдиницаИзмерения</dcsset:field>
							</dcsset:item>
							<dcsset:placement>Together</dcsset:placement>
						</dcsset:item>
					</dcsset:selection>
				</dcsset:row>
				<dcsset:columnsViewMode>Normal</dcsset:columnsViewMode>
				<dcsset:columnsUserSettingID>9cacb28a-3859-4695-8d37-b08983f214df</dcsset:columnsUserSettingID>
				<dcsset:rowsViewMode>Normal</dcsset:rowsViewMode>
				<dcsset:rowsUserSettingID>f45928fd-13e1-4dd5-952d-16e869c137d7</dcsset:rowsUserSettingID>
			</dcsset:item>
		</dcsset:settings>
	</settingsVariant>
	<settingsVariant>
		<dcsset:name>ОсновнойПоРегистратору</dcsset:name>
		<dcsset:presentation xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Ведомость по товарам организаций в ценах номенклатуры (по документам движения (регистратору))</v8:content>
			</v8:item>
		</dcsset:presentation>
		<dcsset:settings xmlns:style="http://v8.1c.ru/8.1/data/ui/style" xmlns:sys="http://v8.1c.ru/8.1/data/ui/fonts/system" xmlns:web="http://v8.1c.ru/8.1/data/ui/colors/web" xmlns:win="http://v8.1c.ru/8.1/data/ui/colors/windows">
			<dcsset:selection>
				<dcsset:item xsi:type="dcsset:SelectedItemFolder">
					<dcsset:title>Начальный остаток</dcsset:title>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>КоличествоНачальныйОстаток</dcsset:field>
						<dcsset:title>Количество</dcsset:title>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>СуммаНачальныйОстаток</dcsset:field>
						<dcsset:title>Сумма</dcsset:title>
					</dcsset:item>
					<dcsset:placement>Auto</dcsset:placement>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemFolder">
					<dcsset:title>Приход</dcsset:title>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>КоличествоПриход</dcsset:field>
						<dcsset:title>Количество</dcsset:title>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>СуммаПриход</dcsset:field>
						<dcsset:title>Сумма</dcsset:title>
					</dcsset:item>
					<dcsset:placement>Auto</dcsset:placement>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemFolder">
					<dcsset:title>Расход</dcsset:title>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>КоличествоРасход</dcsset:field>
						<dcsset:title>Количество</dcsset:title>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>СуммаРасход</dcsset:field>
						<dcsset:title>Сумма</dcsset:title>
					</dcsset:item>
					<dcsset:placement>Auto</dcsset:placement>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemFolder">
					<dcsset:title>Конечный остаток</dcsset:title>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>КоличествоКонечныйОстаток</dcsset:field>
						<dcsset:title>Количество</dcsset:title>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>СуммаКонечныйОстаток</dcsset:field>
						<dcsset:title>Сумма</dcsset:title>
					</dcsset:item>
					<dcsset:placement>Auto</dcsset:placement>
				</dcsset:item>
				<dcsset:viewMode>Normal</dcsset:viewMode>
				<dcsset:userSettingID>2e13174f-0b53-4398-9edc-79356b1561c5</dcsset:userSettingID>
			</dcsset:selection>
			<dcsset:filter>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">Склад</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:right xsi:type="dcscor:DesignTimeValue">Справочник.Склады.ПустаяСсылка</dcsset:right>
					<dcsset:userSettingID>e3b1dcfa-c382-4769-a460-cad6e3f8daa2</dcsset:userSettingID>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">Номенклатура</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:right xsi:type="dcscor:DesignTimeValue">Справочник.Номенклатура.ПустаяСсылка</dcsset:right>
					<dcsset:userSettingID>96aa64b5-39dc-4101-b3ae-e96b22e10060</dcsset:userSettingID>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">Организация</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:right xsi:type="dcscor:DesignTimeValue">Справочник.Организации.ПустаяСсылка</dcsset:right>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">Организация</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:right xsi:type="dcscor:DesignTimeValue">Справочник.Организации.ПустаяСсылка</dcsset:right>
					<dcsset:userSettingID>3d6ae14c-edae-40eb-8552-3363f9e49830</dcsset:userSettingID>
				</dcsset:item>
				<dcsset:viewMode>Normal</dcsset:viewMode>
				<dcsset:userSettingID>b139cc7c-3d38-47c5-a443-300769de284d</dcsset:userSettingID>
			</dcsset:filter>
			<dcsset:dataParameters>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ПериодОтчета</dcscor:parameter>
					<dcscor:value xsi:type="v8:StandardPeriod">
						<v8:variant xsi:type="v8:StandardPeriodVariant">ThisWeek</v8:variant>
					</dcscor:value>
					<dcsset:userSettingID>763c59dc-1533-4a75-bd38-70dcff1603d9</dcsset:userSettingID>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:use>false</dcscor:use>
					<dcscor:parameter>Склад</dcscor:parameter>
					<dcscor:value xsi:nil="true"/>
				</dcscor:item>
			</dcsset:dataParameters>
			<dcsset:order>
				<dcsset:item xsi:type="dcsset:OrderItemField">
					<dcsset:field>ПериодСекунда</dcsset:field>
					<dcsset:orderType>Asc</dcsset:orderType>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:OrderItemField">
					<dcsset:field>Регистратор</dcsset:field>
					<dcsset:orderType>Asc</dcsset:orderType>
				</dcsset:item>
			</dcsset:order>
			<dcsset:outputParameters>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ГоризонтальноеРасположениеОбщихИтогов</dcscor:parameter>
					<dcscor:value xsi:type="dcscor:DataCompositionTotalPlacement">None</dcscor:value>
					<dcsset:userSettingID>81d65698-4b82-4703-ac81-d285e392a1d9</dcsset:userSettingID>
					<dcsset:userSettingPresentation xsi:type="xs:string">Показывать итоги по горизонтали</dcsset:userSettingPresentation>
				</dcscor:item>
			</dcsset:outputParameters>
			<dcsset:item xsi:type="dcsset:StructureItemTable">
				<dcsset:column>
					<dcsset:groupItems>
						<dcsset:item xsi:type="dcsset:GroupItemField">
							<dcsset:field>Склад</dcsset:field>
							<dcsset:groupType>Items</dcsset:groupType>
							<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
							<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
							<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
						</dcsset:item>
					</dcsset:groupItems>
					<dcsset:order>
						<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
					</dcsset:order>
					<dcsset:selection>
						<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
					</dcsset:selection>
				</dcsset:column>
				<dcsset:row>
					<dcsset:groupItems>
						<dcsset:item xsi:type="dcsset:GroupItemField">
							<dcsset:field>Номенклатура</dcsset:field>
							<dcsset:groupType>Items</dcsset:groupType>
							<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
							<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
							<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
						</dcsset:item>
						<dcsset:item xsi:type="dcsset:GroupItemField">
							<dcsset:field>Характеристика</dcsset:field>
							<dcsset:groupType>Items</dcsset:groupType>
							<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
							<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
							<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
						</dcsset:item>
						<dcsset:item xsi:type="dcsset:GroupItemField">
							<dcsset:field>Номенклатура.ЕдиницаИзмерения</dcsset:field>
							<dcsset:groupType>Items</dcsset:groupType>
							<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
							<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
							<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
						</dcsset:item>
					</dcsset:groupItems>
					<dcsset:order>
						<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
					</dcsset:order>
					<dcsset:selection>
						<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
						<dcsset:item xsi:type="dcsset:SelectedItemFolder">
							<dcsset:item xsi:type="dcsset:SelectedItemField">
								<dcsset:field>Номенклатура</dcsset:field>
							</dcsset:item>
							<dcsset:item xsi:type="dcsset:SelectedItemField">
								<dcsset:field>Характеристика</dcsset:field>
							</dcsset:item>
							<dcsset:item xsi:type="dcsset:SelectedItemField">
								<dcsset:field>Номенклатура.ЕдиницаИзмерения</dcsset:field>
							</dcsset:item>
							<dcsset:placement>Together</dcsset:placement>
						</dcsset:item>
					</dcsset:selection>
					<dcsset:item>
						<dcsset:groupItems>
							<dcsset:item xsi:type="dcsset:GroupItemField">
								<dcsset:field>ПериодСекунда</dcsset:field>
								<dcsset:groupType>Items</dcsset:groupType>
								<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
								<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
								<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
							</dcsset:item>
							<dcsset:item xsi:type="dcsset:GroupItemField">
								<dcsset:field>Регистратор</dcsset:field>
								<dcsset:groupType>Items</dcsset:groupType>
								<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
								<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
								<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
							</dcsset:item>
						</dcsset:groupItems>
						<dcsset:filter>
							<dcsset:item xsi:type="dcsset:FilterItemComparison">
								<dcsset:left xsi:type="dcscor:Field">Регистратор</dcsset:left>
								<dcsset:comparisonType>Filled</dcsset:comparisonType>
							</dcsset:item>
						</dcsset:filter>
						<dcsset:order>
							<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
						</dcsset:order>
						<dcsset:selection>
							<dcsset:item xsi:type="dcsset:SelectedItemField">
								<dcsset:field>Регистратор</dcsset:field>
								<dcsset:title>Документ движения</dcsset:title>
							</dcsset:item>
						</dcsset:selection>
						<dcsset:outputParameters>
							<dcscor:item xsi:type="dcsset:SettingsParameterValue">
								<dcscor:parameter>ВыводитьОтбор</dcscor:parameter>
								<dcscor:value xsi:type="dcsset:DataCompositionTextOutputType">DontOutput</dcscor:value>
							</dcscor:item>
						</dcsset:outputParameters>
					</dcsset:item>
				</dcsset:row>
				<dcsset:columnsViewMode>Normal</dcsset:columnsViewMode>
				<dcsset:columnsUserSettingID>c0059b8e-9abd-4166-84bc-dc352889a15b</dcsset:columnsUserSettingID>
				<dcsset:rowsViewMode>Normal</dcsset:rowsViewMode>
				<dcsset:rowsUserSettingID>363aa7c4-fda0-4550-ba17-16786a11f569</dcsset:rowsUserSettingID>
			</dcsset:item>
		</dcsset:settings>
	</settingsVariant>
</DataCompositionSchema>