#Если Сервер Или ТолстыйКлиентОбычноеПриложение Или ВнешнееСоединение Тогда
	
	#Область ПрограммныйИнтерфейс
	// Определяет настройки объекта для подсистемы ВерсионированиеОбъектов.
	//
	// Параметры:
	//  Настройки - Структура - настройки подсистемы.
	Процедура ПриОпределенииНастроекВерсионированияОбъектов(Настройки) Экспорт
		
	КонецПроцедуры
	
	// Заполняет список команд печати.
	// 
	// Параметры:
	//   КомандыПечати - ТаблицаЗначений - состав полей см. в функции УправлениеПечатью.СоздатьКоллекциюКомандПечати.
	//
	Процедура ДобавитьКомандыПечати(КомандыПечати) Экспорт
		
	КонецПроцедуры
	
	// Сформировать печатные формы объектов.
	//
	// ВХОДЯЩИЕ:
	//   ИменаМакетов    - Строка    - Имена макетов, перечисленные через запятую.
	//   МассивОбъектов  - Массив    - Массив ссылок на объекты которые нужно распечатать.
	//   ПараметрыПечати - Структура - Структура дополнительных параметров печати.
	//
	// ИСХОДЯЩИЕ:
	//   КоллекцияПечатныхФорм - Таблица значений - Сформированные табличные документы.
	//   ПараметрыВывода       - Структура        - Параметры сформированных табличных документов.
	//
	Процедура Печать(МассивОбъектов, ПараметрыПечати, КоллекцияПечатныхФорм, ОбъектыПечати, ПараметрыВывода) Экспорт
		
	КонецПроцедуры
	
	// Инициализирует таблицы значений, содержащие данные документа.
	// Таблицы значений сохраняет в свойствах структуры "ДополнительныеСвойства".
	//
	Процедура ИнициализироватьДанныеДокумента(ДокументСсылка, ДополнительныеСвойства) Экспорт
		
		Запрос = Новый Запрос;
		Запрос.УстановитьПараметр("Ссылка", ДокументСсылка);
		
		Запрос.Текст ="ВЫБРАТЬ
		| ОтчетКомитентуОСписанииТовары.Ссылка КАК Ссылка,
		| СУММА(ОтчетКомитентуОСписанииТовары.Сумма) КАК Сумма
		|ПОМЕСТИТЬ ТоварыСумма
		|ИЗ
		| Документ.ОтчетКомитентуОСписании.Товары КАК ОтчетКомитентуОСписанииТовары
		|ГДЕ
		| ОтчетКомитентуОСписанииТовары.Ссылка = &Ссылка
		|
		|СГРУППИРОВАТЬ ПО
		| ОтчетКомитентуОСписанииТовары.Ссылка
		|;
		|
		|////////////////////////////////////////////////////////////////////////////////
		|ВЫБРАТЬ
		| ДанныеДокумента.Дата КАК Период,
		| ДанныеДокумента.Ссылка КАК Ссылка,
		| ДанныеДокумента.Организация КАК Организация,
		| ДанныеДокумента.Магазин КАК Магазин,
		| ДанныеДокумента.Контрагент КАК Контрагент,
		| ДанныеДокумента.Договор КАК Договор,
		| ДанныеДокумента.Ссылка КАК Основание,
		| ДанныеДокумента.Магазин.ИспользоватьОрдернуюСхемуПриПоступлении КАК ПоступлениеПоОрдернойСхеме,
		| ДанныеДокумента.ЦенаВключаетНДС КАК ЦенаВключаетНДС,
		| ДанныеДокумента.УчитыватьНДС КАК УчитыватьНДС,
		| ДанныеДокумента.СуммаДокумента КАК СуммаДокумента,
		| НЕ ДанныеДокумента.Магазин.СкладУправляющейСистемы КАК ФормироватьДвижения,
		| ТоварыСумма.Сумма КАК Сумма
		|ИЗ
		| Документ.ОтчетКомитентуОСписании КАК ДанныеДокумента
		|     ЛЕВОЕ СОЕДИНЕНИЕ ТоварыСумма КАК ТоварыСумма
		|     ПО ДанныеДокумента.Ссылка = ТоварыСумма.Ссылка
		|ГДЕ
		| ДанныеДокумента.Ссылка = &Ссылка";
		
		
		РезультатЗапроса = Запрос.Выполнить();
		
		Реквизиты = РезультатЗапроса.Выбрать();
		Реквизиты.Следующий(); 
		
		ОбщегоНазначенияРТ.ПеренестиСтрокуВыборкиВПараметрыЗапроса(РезультатЗапроса, Реквизиты, Запрос);
		
		ИспользоватьРасчетыСКлиентами = ПолучитьФункциональнуюОпцию("ИспользоватьРасчетыСКлиентами");
		Запрос.УстановитьПараметр("ИспользоватьРасчетыСКлиентами", ИспользоватьРасчетыСКлиентами);
		
		// 0 ТаблицаРасчетыСПоставщиками 
		ТекстЗапроса =
		"ВЫБРАТЬ
		|	ЗНАЧЕНИЕ(ВидДвиженияНакопления.Расход) КАК ВидДвижения,
		|	&Период КАК Период,
		|	&Магазин КАК Магазин,
		|	&Контрагент КАК Поставщик,
		|	&Ссылка КАК ДокументРасчета,
		|	&Сумма КАК Сумма,
		|	&Сумма КАК КОплате,
		|	0 КАК КПоступлению,
		|	ЗНАЧЕНИЕ(Перечисление.ФормыОплаты.ПустаяСсылка) КАК ФормаОплаты,
		|	ЛОЖЬ КАК Взаимозачет
		|ГДЕ
		|	&ФормироватьДвижения
		|;
		|
		|////////////////////////////////////////////////////////////////////////////////
		|ВЫБРАТЬ
		|	ТаблицаТовары.НомерСтроки              КАК НомерСтроки,
		|	ЗНАЧЕНИЕ(ВидДвиженияНакопления.Расход) КАК ВидДвижения,
		|	&Период                                КАК Период,
		|	&Организация                           КАК Организация,
		|	ТаблицаТовары.Склад                    КАК Склад,
		|	&Контрагент                            КАК Поставщик,
		|	&Договор                               КАК Договор,
		|	ТаблицаТовары.Номенклатура             КАК Номенклатура,
		|	ТаблицаТовары.Характеристика           КАК Характеристика,
		|	ТаблицаТовары.НомерГТД                 КАК НомерГТД,
		|	ТаблицаТовары.Сумма                    КАК Сумма,
		|	ТаблицаТовары.Количество               КАК КоличествоСписано
		|ИЗ
		|	Документ.ОтчетКомитентуОСписании.Товары КАК ТаблицаТовары
		|ГДЕ
		|	&ФормироватьДвижения
		|	И ТаблицаТовары.Номенклатура.ТипНоменклатуры <> ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Услуга)
		|	И ТаблицаТовары.Ссылка = &Ссылка
		|
		|УПОРЯДОЧИТЬ ПО
		|	НомерСтроки";
		
		Запрос.Текст = ТекстЗапроса;
		Результат    = Запрос.ВыполнитьПакет();
		
		ТаблицыДляДвижений = ДополнительныеСвойства.ТаблицыДляДвижений;	
		ТаблицыДляДвижений.Вставить("ТаблицаРасчетыСПоставщиками"               , Результат[0].Выгрузить());
		ТаблицыДляДвижений.Вставить("ТаблицаТоварыКОформлениюОтчетовКомитенту"  , Результат[1].Выгрузить());
		
	КонецПроцедуры
	
	#КонецОбласти
	
	#Область СлужебныеПроцедурыИФункции
	
	#КонецОбласти
	
#КонецЕсли
