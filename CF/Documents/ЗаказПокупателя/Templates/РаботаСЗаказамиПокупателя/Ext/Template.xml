<?xml version="1.0" encoding="UTF-8"?>
<DataCompositionSchema xmlns="http://v8.1c.ru/8.1/data-composition-system/schema" xmlns:dcscom="http://v8.1c.ru/8.1/data-composition-system/common" xmlns:dcscor="http://v8.1c.ru/8.1/data-composition-system/core" xmlns:dcsset="http://v8.1c.ru/8.1/data-composition-system/settings" xmlns:v8="http://v8.1c.ru/8.1/data/core" xmlns:v8ui="http://v8.1c.ru/8.1/data/ui" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<dataSource>
		<name>ИсточникДанных1</name>
		<dataSourceType>Local</dataSourceType>
	</dataSource>
	<dataSet xsi:type="DataSetQuery">
		<name>НаборДанных1</name>
		<field xsi:type="DataSetFieldField">
			<dataPath>ВерсияДанных</dataPath>
			<field>ВерсияДанных</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Дата</dataPath>
			<field>Дата</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПометкаУдаления</dataPath>
			<field>ПометкаУдаления</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Номер</dataPath>
			<field>Номер</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Проведен</dataPath>
			<field>Проведен</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>АдресДоставки</dataPath>
			<field>АдресДоставки</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ВладелецДисконтнойКарты</dataPath>
			<field>ВладелецДисконтнойКарты</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ДействиеЗакрытие</dataPath>
			<field>ДействиеЗакрытие</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ДействиеОтмена</dataPath>
			<field>ДействиеОтмена</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ДействиеПродажа</dataPath>
			<field>ДействиеПродажа</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ДействиеРезерв</dataPath>
			<field>ДействиеРезерв</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ДействиеСогласование</dataPath>
			<field>ДействиеСогласование</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ДисконтнаяКарта</dataPath>
			<field>ДисконтнаяКарта</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ДокументПродажи</dataPath>
			<field>ДокументПродажи</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ЖелаемаяДатаПродажи</dataPath>
			<field>ЖелаемаяДатаПродажи</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Заказ</dataPath>
			<field>Заказ</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ЗаказПокупателя</dataPath>
			<field>ЗаказПокупателя</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КодСтроки</dataPath>
			<field>КодСтроки</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Комментарий</dataPath>
			<field>Комментарий</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Магазин</dataPath>
			<field>Магазин</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>МаксимальныйКодСтроки</dataPath>
			<field>МаксимальныйКодСтроки</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>НаличиеНезарезервированныхСтрок</dataPath>
			<field>НаличиеНезарезервированныхСтрок</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Номенклатура</dataPath>
			<field>Номенклатура</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Организация</dataPath>
			<field>Организация</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Ответственный</dataPath>
			<field>Ответственный</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Отменено</dataPath>
			<field>Отменено</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Продавец</dataPath>
			<field>Продавец</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СкидкиРассчитаны</dataPath>
			<field>СкидкиРассчитаны</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Склад</dataPath>
			<field>Склад</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Состояние</dataPath>
			<field>Состояние</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Ссылка</dataPath>
			<field>Ссылка</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Статус</dataPath>
			<field>Статус</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СуммаДокумента</dataPath>
			<field>СуммаДокумента</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>УчитыватьНДС</dataPath>
			<field>УчитыватьНДС</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Характеристика</dataPath>
			<field>Характеристика</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ЦенаВключаетНДС</dataPath>
			<field>ЦенаВключаетНДС</field>
		</field>
		<dataSource>ИсточникДанных1</dataSource>
		<query>ВЫБРАТЬ
	ЗаказыПокупателейОстатки.Заказ КАК Заказ,
	ЗаказыПокупателейОстатки.КодСтроки,
	ЗаказыПокупателейОстатки.Номенклатура,
	ЗаказыПокупателейОстатки.Характеристика,
	ЗаказыПокупателейОстатки.ЗаказаноОстаток,
	ЗаказыПокупателейОстатки.Заказ.Склад КАК Склад
ПОМЕСТИТЬ ОстаткиНоменклатурыПоЗаказам
ИЗ
	РегистрНакопления.ЗаказыПокупателей.Остатки КАК ЗаказыПокупателейОстатки
ГДЕ
	ЗаказыПокупателейОстатки.ЗаказаноОстаток &gt; 0

ИНДЕКСИРОВАТЬ ПО
	Заказ
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗЛИЧНЫЕ
	ОстаткиНоменклатурыПоЗаказам.Заказ КАК Заказ
ПОМЕСТИТЬ ЗаказыСОстатками
ИЗ
	ОстаткиНоменклатурыПоЗаказам КАК ОстаткиНоменклатурыПоЗаказам

ИНДЕКСИРОВАТЬ ПО
	Заказ
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ОстаткиНоменклатурыПоЗаказам.Заказ,
	ОстаткиНоменклатурыПоЗаказам.КодСтроки,
	ОстаткиНоменклатурыПоЗаказам.Номенклатура КАК Номенклатура,
	ОстаткиНоменклатурыПоЗаказам.Характеристика КАК Характеристика,
	ОстаткиНоменклатурыПоЗаказам.ЗаказаноОстаток,
	ОстаткиНоменклатурыПоЗаказам.Склад КАК Склад,
	ВЫБОР
		КОГДА ЗаказПокупателяТовары.Номенклатура.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Услуга)
			ТОГДА ИСТИНА
		ИНАЧЕ ЛОЖЬ
	КОНЕЦ КАК ЭтоУслуга,
	ЗаказПокупателяТовары.Резервировать КАК Резервировать
ПОМЕСТИТЬ ОстаткиПоЗаказамДополненная
ИЗ
	ОстаткиНоменклатурыПоЗаказам КАК ОстаткиНоменклатурыПоЗаказам
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Документ.ЗаказПокупателя.Товары КАК ЗаказПокупателяТовары
		ПО ОстаткиНоменклатурыПоЗаказам.Заказ = ЗаказПокупателяТовары.Ссылка
			И ОстаткиНоменклатурыПоЗаказам.КодСтроки = ЗаказПокупателяТовары.КодСтроки

ИНДЕКСИРОВАТЬ ПО
	Склад,
	Номенклатура,
	Характеристика
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ОстаткиПоЗаказамДополненная.Заказ,
	ОстаткиПоЗаказамДополненная.КодСтроки,
	ОстаткиПоЗаказамДополненная.Номенклатура,
	ОстаткиПоЗаказамДополненная.Характеристика,
	ОстаткиПоЗаказамДополненная.ЗаказаноОстаток,
	ОстаткиПоЗаказамДополненная.Склад,
	ОстаткиПоЗаказамДополненная.ЭтоУслуга
ПОМЕСТИТЬ ОстаткиПоЗаказамДополненнаяДляРезерва
ИЗ
	ОстаткиПоЗаказамДополненная КАК ОстаткиПоЗаказамДополненная
ГДЕ
	НЕ ОстаткиПоЗаказамДополненная.Резервировать
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ТоварыНаСкладахОстатки.Склад,
	ТоварыНаСкладахОстатки.Номенклатура,
	ТоварыНаСкладахОстатки.Характеристика,
	ТоварыНаСкладахОстатки.КоличествоОстаток - ВЫБОР
		КОГДА &amp;ИспользоватьРезервированиеПоЗаказамПокупателей
			ТОГДА 1
		ИНАЧЕ 0
	КОНЕЦ * ТоварыНаСкладахОстатки.РезервОстаток КАК СвободныйОстаток
ПОМЕСТИТЬ ОстаткиНаСкладе
ИЗ
	РегистрНакопления.ТоварыНаСкладах.Остатки(
			,
			(Склад, Номенклатура, Характеристика) В
				(ВЫБРАТЬ
					ОстаткиПоЗаказамДополненная.Склад,
					ОстаткиПоЗаказамДополненная.Номенклатура,
					ОстаткиПоЗаказамДополненная.Характеристика
				ИЗ
					ОстаткиПоЗаказамДополненная КАК ОстаткиПоЗаказамДополненная)) КАК ТоварыНаСкладахОстатки
ГДЕ
	ТоварыНаСкладахОстатки.КоличествоОстаток - ТоварыНаСкладахОстатки.РезервОстаток &gt; 0
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ОстаткиПоЗаказамДополненная.Заказ,
	ОстаткиПоЗаказамДополненная.КодСтроки,
	ВЫБОР
		КОГДА ОстаткиПоЗаказамДополненная.ЗаказаноОстаток &lt;= ЕСТЬNULL(ОстаткиНаСкладе.СвободныйОстаток, 0)
				ИЛИ ОстаткиПоЗаказамДополненная.ЭтоУслуга
			ТОГДА ИСТИНА
		ИНАЧЕ ЛОЖЬ
	КОНЕЦ КАК ПолнаяПродажа,
	ВЫБОР
		КОГДА ЕСТЬNULL(ОстаткиНаСкладе.СвободныйОстаток, 0) = 0
				И НЕ ОстаткиПоЗаказамДополненная.ЭтоУслуга
			ТОГДА ЛОЖЬ
		ИНАЧЕ ИСТИНА
	КОНЕЦ КАК ВозможностьПродажи
ПОМЕСТИТЬ ТаблицаПодготовкиКАнализуПродажи
ИЗ
	ОстаткиПоЗаказамДополненная КАК ОстаткиПоЗаказамДополненная
		ЛЕВОЕ СОЕДИНЕНИЕ ОстаткиНаСкладе КАК ОстаткиНаСкладе
		ПО ОстаткиПоЗаказамДополненная.Номенклатура = ОстаткиНаСкладе.Номенклатура
			И ОстаткиПоЗаказамДополненная.Характеристика = ОстаткиНаСкладе.Характеристика
			И ОстаткиПоЗаказамДополненная.Склад = ОстаткиНаСкладе.Склад
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ТаблицаПодготовкиКАнализуПродажи.Заказ,
	МАКСИМУМ(ТаблицаПодготовкиКАнализуПродажи.ВозможностьПродажи) КАК ВозможностьПродажи,
	МИНИМУМ(ТаблицаПодготовкиКАнализуПродажи.ПолнаяПродажа) КАК ПолнаяПродажа
ПОМЕСТИТЬ ЗаказыВозможностьПродажи
ИЗ
	ТаблицаПодготовкиКАнализуПродажи КАК ТаблицаПодготовкиКАнализуПродажи

СГРУППИРОВАТЬ ПО
	ТаблицаПодготовкиКАнализуПродажи.Заказ
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ОстаткиПоЗаказамДополненнаяДляРезерва.Заказ,
	ОстаткиПоЗаказамДополненнаяДляРезерва.КодСтроки,
	ВЫБОР
		КОГДА ОстаткиПоЗаказамДополненнаяДляРезерва.ЗаказаноОстаток &lt;= ЕСТЬNULL(ОстаткиНаСкладе.СвободныйОстаток, 0)
				ИЛИ ОстаткиПоЗаказамДополненнаяДляРезерва.ЭтоУслуга
			ТОГДА ИСТИНА
		ИНАЧЕ ЛОЖЬ
	КОНЕЦ КАК ПолноеРезервирование,
	ВЫБОР
		КОГДА ЕСТЬNULL(ОстаткиНаСкладе.СвободныйОстаток, 0) = 0
				И НЕ ОстаткиПоЗаказамДополненнаяДляРезерва.ЭтоУслуга
			ТОГДА ЛОЖЬ
		ИНАЧЕ ИСТИНА
	КОНЕЦ КАК ВозможностьРезервирования
ПОМЕСТИТЬ ТаблицаПодготовкиКАнализуРезерва
ИЗ
	ОстаткиПоЗаказамДополненнаяДляРезерва КАК ОстаткиПоЗаказамДополненнаяДляРезерва
		ЛЕВОЕ СОЕДИНЕНИЕ ОстаткиНаСкладе КАК ОстаткиНаСкладе
		ПО ОстаткиПоЗаказамДополненнаяДляРезерва.Номенклатура = ОстаткиНаСкладе.Номенклатура
			И ОстаткиПоЗаказамДополненнаяДляРезерва.Характеристика = ОстаткиНаСкладе.Характеристика
			И ОстаткиПоЗаказамДополненнаяДляРезерва.Склад = ОстаткиНаСкладе.Склад
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ТаблицаПодготовкиКАнализуРезерва.Заказ,
	МАКСИМУМ(ТаблицаПодготовкиКАнализуРезерва.ВозможностьРезервирования) КАК ВозможностьРезервирования,
	МИНИМУМ(ТаблицаПодготовкиКАнализуРезерва.ПолноеРезервирование) КАК ПолноеРезервирование
ПОМЕСТИТЬ ЗаказыВозможностьРезервирования
ИЗ
	ТаблицаПодготовкиКАнализуРезерва КАК ТаблицаПодготовкиКАнализуРезерва

СГРУППИРОВАТЬ ПО
	ТаблицаПодготовкиКАнализуРезерва.Заказ
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗЛИЧНЫЕ
	ЗаказПокупателяТовары.Ссылка КАК Заказ
ПОМЕСТИТЬ ЗаказыСОтменой
ИЗ
	Документ.ЗаказПокупателя.Товары КАК ЗаказПокупателяТовары
ГДЕ
	ЗаказПокупателяТовары.Отменено

ИНДЕКСИРОВАТЬ ПО
	Заказ
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗЛИЧНЫЕ
	ПродажиОбороты.ЗаказПокупателя КАК ЗаказПокупателя
ПОМЕСТИТЬ ЗаказыСПродажами
ИЗ
	РегистрНакопления.Продажи.Обороты КАК ПродажиОбороты
ГДЕ
	ПродажиОбороты.КоличествоОборот &gt; 0

ИНДЕКСИРОВАТЬ ПО
	ЗаказПокупателя
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВЫБОР
		КОГДА НЕ ДокументЗаказПокупателя.Проведен
			ТОГДА 0
		ИНАЧЕ ВЫБОР
				КОГДА ДокументЗаказПокупателя.Статус = ЗНАЧЕНИЕ(Перечисление.СтатусыЗаказовПокупателей.НеСогласован)
					ТОГДА 1
				ИНАЧЕ 4
			КОНЕЦ
	КОНЕЦ КАК ДействиеСогласование,
	ВЫБОР
		КОГДА ДокументЗаказПокупателя.Статус = ЗНАЧЕНИЕ(Перечисление.СтатусыЗаказовПокупателей.НеСогласован)
				ИЛИ НЕ ДокументЗаказПокупателя.Проведен
			ТОГДА 0
		ИНАЧЕ ВЫБОР
				КОГДА ДокументЗаказПокупателя.НаличиеНезарезервированныхСтрок
						И НЕ ЗаказыСОстатками.Заказ ЕСТЬ NULL 
					ТОГДА ВЫБОР
							КОГДА ЕСТЬNULL(ЗаказыВозможностьРезервирования.ПолноеРезервирование, ЛОЖЬ)
								ТОГДА 1
							ИНАЧЕ ВЫБОР
									КОГДА ЕСТЬNULL(ЗаказыВозможностьРезервирования.ВозможностьРезервирования, ЛОЖЬ)
										ТОГДА 2
									ИНАЧЕ 3
								КОНЕЦ
						КОНЕЦ
				ИНАЧЕ ВЫБОР
						КОГДА ДокументЗаказПокупателя.НаличиеНезарезервированныхСтрок
								ИЛИ ДокументЗаказПокупателя.Отменено
							ТОГДА 0
						ИНАЧЕ 4
					КОНЕЦ
			КОНЕЦ
	КОНЕЦ КАК ДействиеРезерв,
	ВЫБОР
		КОГДА ДокументЗаказПокупателя.Статус = ЗНАЧЕНИЕ(Перечисление.СтатусыЗаказовПокупателей.НеСогласован)
				ИЛИ НЕ ДокументЗаказПокупателя.Проведен
			ТОГДА 0
		ИНАЧЕ ВЫБОР
				КОГДА НЕ ЗаказыСОстатками.Заказ ЕСТЬ NULL 
					ТОГДА ВЫБОР
							КОГДА ЕСТЬNULL(ЗаказыВозможностьПродажи.ПолнаяПродажа, ЛОЖЬ)
								ТОГДА 1
							ИНАЧЕ ВЫБОР
									КОГДА ЕСТЬNULL(ЗаказыВозможностьПродажи.ВозможностьПродажи, ЛОЖЬ)
										ТОГДА 2
									ИНАЧЕ 3
								КОНЕЦ
						КОНЕЦ
				ИНАЧЕ ВЫБОР
						КОГДА ЗаказыСПродажами.ЗаказПокупателя ЕСТЬ NULL 
							ТОГДА 0
						ИНАЧЕ 4
					КОНЕЦ
			КОНЕЦ
	КОНЕЦ КАК ДействиеПродажа,
	ВЫБОР
		КОГДА НЕ ДокументЗаказПокупателя.Проведен
			ТОГДА 0
		ИНАЧЕ ВЫБОР
				КОГДА НЕ ЗаказыСОстатками.Заказ ЕСТЬ NULL 
					ТОГДА 1
				ИНАЧЕ ВЫБОР
						КОГДА НЕ ЗаказыСОтменой.Заказ ЕСТЬ NULL 
							ТОГДА 4
						ИНАЧЕ 0
					КОНЕЦ
			КОНЕЦ
	КОНЕЦ КАК ДействиеОтмена,
	ВЫБОР
		КОГДА НЕ ДокументЗаказПокупателя.Проведен
			ТОГДА 0
		ИНАЧЕ ВЫБОР
				КОГДА НЕ ДокументЗаказПокупателя.Статус = ЗНАЧЕНИЕ(Перечисление.СтатусыЗаказовПокупателей.Закрыт)
					ТОГДА 1
				ИНАЧЕ 4
			КОНЕЦ
	КОНЕЦ КАК ДействиеЗакрытие,
	ДокументЗаказПокупателя.ЖелаемаяДатаПродажи КАК ЖелаемаяДатаПродажи,
	ДокументЗаказПокупателя.Ссылка КАК Ссылка,
	ДокументЗаказПокупателя.ВерсияДанных,
	ДокументЗаказПокупателя.ПометкаУдаления,
	ДокументЗаказПокупателя.Номер КАК Номер,
	ДокументЗаказПокупателя.Дата КАК Дата,
	ДокументЗаказПокупателя.Проведен,
	ДокументЗаказПокупателя.Склад,
	ДокументЗаказПокупателя.Магазин,
	ДокументЗаказПокупателя.Комментарий,
	ДокументЗаказПокупателя.СуммаДокумента,
	ДокументЗаказПокупателя.ДисконтнаяКарта,
	ДокументЗаказПокупателя.Ответственный,
	ДокументЗаказПокупателя.УчитыватьНДС,
	ДокументЗаказПокупателя.ЦенаВключаетНДС,
	ДокументЗаказПокупателя.АдресДоставки,
	ДокументЗаказПокупателя.ВладелецДисконтнойКарты,
	ДокументЗаказПокупателя.Продавец,
	ДокументЗаказПокупателя.Организация,
	ДокументЗаказПокупателя.СкидкиРассчитаны,
	ДокументЗаказПокупателя.МаксимальныйКодСтроки,
	ДокументЗаказПокупателя.Статус,
	ДокументЗаказПокупателя.НаличиеНезарезервированныхСтрок,
	ДокументЗаказПокупателя.Отменено,
	ВЫБОР
		КОГДА НЕ ДокументЗаказПокупателя.Проведен
			ТОГДА ЗНАЧЕНИЕ(Перечисление.СостоянияЗаказовПокупателей.ПустаяСсылка)
		КОГДА ДокументЗаказПокупателя.Статус = ЗНАЧЕНИЕ(Перечисление.СтатусыЗаказовПокупателей.НеСогласован)
			ТОГДА ЗНАЧЕНИЕ(Перечисление.СостоянияЗаказовПокупателей.ОжидаетсяСогласование)
		КОГДА ДокументЗаказПокупателя.Статус = ЗНАЧЕНИЕ(Перечисление.СтатусыЗаказовПокупателей.Закрыт)
			ТОГДА ЗНАЧЕНИЕ(Перечисление.СостоянияЗаказовПокупателей.Закрыт)
		КОГДА ДокументЗаказПокупателя.Отменено
			ТОГДА ЗНАЧЕНИЕ(Перечисление.СостоянияЗаказовПокупателей.ГотовКЗакрытию)
		КОГДА НЕ ЗаказыСОстатками.Заказ ЕСТЬ NULL 
			ТОГДА ВЫБОР
					КОГДА ДокументЗаказПокупателя.НаличиеНезарезервированныхСтрок
						ТОГДА ЗНАЧЕНИЕ(Перечисление.СостоянияЗаказовПокупателей.ОжидаетсяРезервирование)
					ИНАЧЕ ЗНАЧЕНИЕ(Перечисление.СостоянияЗаказовПокупателей.ОжидаетсяПродажа)
				КОНЕЦ
		ИНАЧЕ ЗНАЧЕНИЕ(Перечисление.СостоянияЗаказовПокупателей.ГотовКЗакрытию)
	КОНЕЦ КАК Состояние
ИЗ
	Документ.ЗаказПокупателя КАК ДокументЗаказПокупателя
		ЛЕВОЕ СОЕДИНЕНИЕ ЗаказыСОстатками КАК ЗаказыСОстатками
		ПО ДокументЗаказПокупателя.Ссылка = ЗаказыСОстатками.Заказ
		ЛЕВОЕ СОЕДИНЕНИЕ ЗаказыВозможностьПродажи КАК ЗаказыВозможностьПродажи
		ПО ДокументЗаказПокупателя.Ссылка = ЗаказыВозможностьПродажи.Заказ
		ЛЕВОЕ СОЕДИНЕНИЕ ЗаказыВозможностьРезервирования КАК ЗаказыВозможностьРезервирования
		ПО ДокументЗаказПокупателя.Ссылка = ЗаказыВозможностьРезервирования.Заказ
		ЛЕВОЕ СОЕДИНЕНИЕ ЗаказыСПродажами КАК ЗаказыСПродажами
		ПО ДокументЗаказПокупателя.Ссылка = ЗаказыСПродажами.ЗаказПокупателя
		ЛЕВОЕ СОЕДИНЕНИЕ ЗаказыСОтменой КАК ЗаказыСОтменой
		ПО ДокументЗаказПокупателя.Ссылка = ЗаказыСОтменой.Заказ

УПОРЯДОЧИТЬ ПО
	ЖелаемаяДатаПродажи,
	Дата,
	Номер</query>
	</dataSet>
	<parameter>
		<name>НачалоПериода</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Начало периода</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>true</useRestriction>
		<availableAsField>false</availableAsField>
	</parameter>
	<parameter>
		<name>КонецПериода</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Конец периода</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>true</useRestriction>
		<availableAsField>false</availableAsField>
	</parameter>
	<parameter>
		<name>Период</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Период</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>true</useRestriction>
		<availableAsField>false</availableAsField>
	</parameter>
	<parameter>
		<name>ИспользоватьРезервированиеПоЗаказамПокупателей</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Использовать резервирование по заказам покупателей</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:boolean</v8:Type>
		</valueType>
		<value xsi:type="xs:boolean">false</value>
		<useRestriction>true</useRestriction>
		<availableAsField>false</availableAsField>
	</parameter>
	<settingsVariant>
		<dcsset:name>Основной</dcsset:name>
		<dcsset:presentation xsi:type="xs:string">Основной</dcsset:presentation>
		<dcsset:settings xmlns:style="http://v8.1c.ru/8.1/data/ui/style" xmlns:sys="http://v8.1c.ru/8.1/data/ui/fonts/system" xmlns:web="http://v8.1c.ru/8.1/data/ui/colors/web" xmlns:win="http://v8.1c.ru/8.1/data/ui/colors/windows">
			<dcsset:selection>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ДействиеСогласование</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ДействиеРезерв</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ДействиеПродажа</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ДействиеОтмена</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ДействиеЗакрытие</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ЖелаемаяДатаПродажи</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Ссылка</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ПометкаУдаления</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Номер</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Дата</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Проведен</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Склад</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Магазин</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>СуммаДокумента</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ДисконтнаяКарта</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Ответственный</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Организация</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Продавец</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Статус</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>НаличиеНезарезервированныхСтрок</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Отменено</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Состояние</dcsset:field>
				</dcsset:item>
			</dcsset:selection>
			<dcsset:order>
				<dcsset:item xsi:type="dcsset:OrderItemField">
					<dcsset:field>ЖелаемаяДатаПродажи</dcsset:field>
					<dcsset:orderType>Asc</dcsset:orderType>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:OrderItemField">
					<dcsset:field>Дата</dcsset:field>
					<dcsset:orderType>Asc</dcsset:orderType>
				</dcsset:item>
			</dcsset:order>
			<dcsset:item xsi:type="dcsset:StructureItemGroup">
				<dcsset:order>
					<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
				</dcsset:order>
				<dcsset:selection>
					<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
				</dcsset:selection>
			</dcsset:item>
		</dcsset:settings>
	</settingsVariant>
</DataCompositionSchema>