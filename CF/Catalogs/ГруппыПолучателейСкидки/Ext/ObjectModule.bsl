#Если Сервер Или ТолстыйКлиентОбычноеПриложение Или ВнешнееСоединение Тогда

#Область ОбработчикиСобытий

Процедура ОбработкаЗаполнения(ДанныеЗаполнения, СтандартнаяОбработка)
	
	Если ЭтоГруппа Тогда
		Возврат;
	КонецЕсли;
	
	// Установить ответственного по умолчанию.
	Если НЕ ЗначениеЗаполнено(Ответственный) Тогда
		Ответственный = Пользователи.ТекущийПользователь();
	КонецЕсли;

	// установить дату создания
	Если НЕ ЗначениеЗаполнено(ДатаСоздания) Тогда
		ДатаСоздания = ТекущаяДатаСеанса();
	КонецЕсли;
	
	// Установить способ формирования.
	Если НЕ ЗначениеЗаполнено(СпособФормирования) Тогда
		СпособФормирования = Перечисления.СпособыФормированияСегментов.ФормироватьВручную;
	КонецЕсли;
	
КонецПроцедуры

Процедура ПередЗаписью(Отказ)
	
	Если ОбменДанными.Загрузка Тогда
		Возврат;
	КонецЕсли;
	
	Если НЕ ЭтоГруппа Тогда
		Если ИмяШаблонаСКД = "ФизическиеЛица"
			ИЛИ ИмяШаблонаСКД = "ФизическиеЛицаДержателиКартПоВидуКарты"
			ИЛИ ИмяШаблонаСКД = "ФизическиеЛицаДержателиКартПоОбъемамНакоплений" Тогда
			ТипПолучателей = Перечисления.ТипыПолучателейСкидок.ФизическиеЛица;
		ИначеЕсли ИмяШаблонаСКД = "Контрагенты" Тогда
			ТипПолучателей = Перечисления.ТипыПолучателейСкидок.Контрагенты;
		Иначе
			ТипПолучателей = Перечисления.ТипыПолучателейСкидок.СмешанныйСписок;
		КонецЕсли;
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти

#КонецЕсли
