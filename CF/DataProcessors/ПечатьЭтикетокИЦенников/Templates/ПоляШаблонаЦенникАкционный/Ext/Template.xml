<?xml version="1.0" encoding="UTF-8"?>
<DataCompositionSchema xmlns="http://v8.1c.ru/8.1/data-composition-system/schema" xmlns:dcscom="http://v8.1c.ru/8.1/data-composition-system/common" xmlns:dcscor="http://v8.1c.ru/8.1/data-composition-system/core" xmlns:dcsset="http://v8.1c.ru/8.1/data-composition-system/settings" xmlns:v8="http://v8.1c.ru/8.1/data/core" xmlns:v8ui="http://v8.1c.ru/8.1/data/ui" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<dataSource>
		<name>ИсточникДанных1</name>
		<dataSourceType>Local</dataSourceType>
	</dataSource>
	<dataSet xsi:type="DataSetQuery">
		<name>НаборДанных</name>
		<field xsi:type="DataSetFieldField">
			<dataPath>Количество</dataPath>
			<field>Количество</field>
			<useRestriction>
				<group>true</group>
				<order>true</order>
			</useRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Номенклатура</dataPath>
			<field>Номенклатура</field>
			<valueType>
				<v8:Type xmlns:d5p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d5p1:CatalogRef.Номенклатура</v8:Type>
			</valueType>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Сегмент</dataPath>
			<field>Сегмент</field>
			<useRestriction>
				<field>true</field>
				<order>true</order>
			</useRestriction>
			<attributeUseRestriction>
				<field>true</field>
				<order>true</order>
			</attributeUseRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Упаковка</dataPath>
			<field>Упаковка</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Характеристика</dataPath>
			<field>Характеристика</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Цена</dataPath>
			<field>Цена</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Штрихкод</dataPath>
			<field>Штрихкод</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ОстатокНаСкладе</dataPath>
			<field>ОстатокНаСкладе</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Остаток на складе</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<group>true</group>
				<order>true</order>
			</useRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КоличествоЦенниковДляПечати</dataPath>
			<field>КоличествоЦенниковДляПечати</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Количество ценников для печати</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<group>true</group>
				<order>true</order>
			</useRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КоличествоЭтикетокДляПечати</dataPath>
			<field>КоличествоЭтикетокДляПечати</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Количество этикеток для печати</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<group>true</group>
				<order>true</order>
			</useRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ШаблонЦенникаДляПечати</dataPath>
			<field>ШаблонЦенникаДляПечати</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Шаблон ценника для печати</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<group>true</group>
				<order>true</order>
			</useRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ШаблонЭтикеткиДляПечати</dataPath>
			<field>ШаблонЭтикеткиДляПечати</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Шаблон этикетки для печати</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<group>true</group>
				<order>true</order>
			</useRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ВидЦены</dataPath>
			<field>ВидЦены</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Вид цены</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Организация</dataPath>
			<field>Организация</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Организация</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ТекущееВремя</dataPath>
			<field>ТекущееВремя</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Текущее время</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<group>true</group>
			</useRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ТекущийПользователь</dataPath>
			<field>ТекущийПользователь</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Текущий пользователь</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<group>true</group>
			</useRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ДатаПоследнегоИзмененияЦены</dataPath>
			<field>ДатаПоследнегоИзмененияЦены</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Склад</dataPath>
			<field>Склад</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Магазин</dataPath>
			<field>Магазин</field>
			<useRestriction>
				<condition>true</condition>
			</useRestriction>
			<attributeUseRestriction>
				<condition>true</condition>
			</attributeUseRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>SKU</dataPath>
			<field>SKU</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПредыдущаяЦена</dataPath>
			<field>ПредыдущаяЦена</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Предыдущая цена</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ЦенаСоСкидкой</dataPath>
			<field>ЦенаСоСкидкой</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Цена со скидкой</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>НаименованиеСкидки</dataPath>
			<field>НаименованиеСкидки</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Наименование скидки</v8:content>
				</v8:item>
			</title>
		</field>
		<dataSource>ИсточникДанных1</dataSource>
		<query>ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ИсходныеДанные.Номенклатура КАК Номенклатура,
	ИсходныеДанные.Характеристика КАК Характеристика,
	ИсходныеДанные.Упаковка КАК Упаковка,
	ИсходныеДанные.Количество КАК Количество,
	"КоличествоЦенников" КАК КоличествоЦенниковДляПечати,
	"КоличествоЭтикеток" КАК КоличествоЭтикетокДляПечати,
	"ШаблонЭтикетки" КАК ШаблонЭтикеткиДляПечати,
	"ШаблонЦенника" КАК ШаблонЦенникаДляПечати,
	ИсходныеДанные.Организация КАК Организация
ПОМЕСТИТЬ ИсходныеДанные
ИЗ
	(ВЫБРАТЬ
		ЗНАЧЕНИЕ(Справочник.Номенклатура.ПустаяСсылка) КАК Номенклатура,
		ЗНАЧЕНИЕ(Справочник.ХарактеристикиНоменклатуры.ПустаяСсылка) КАК Характеристика,
		ЗНАЧЕНИЕ(Справочник.УпаковкиНоменклатуры.ПустаяСсылка) КАК Упаковка,
		0 КАК Количество,
		ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка) КАК Организация) КАК ИсходныеДанные

ИНДЕКСИРОВАТЬ ПО
	Номенклатура,
	Характеристика,
	Упаковка
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	Штрихкоды.Владелец КАК Номенклатура,
	Штрихкоды.Характеристика КАК Характеристика,
	Штрихкоды.Упаковка КАК Упаковка,
	МАКСИМУМ(Штрихкоды.Штрихкод) КАК Штрихкод
ПОМЕСТИТЬ ШтрихкодыНоменклатуры
ИЗ
	РегистрСведений.Штрихкоды КАК Штрихкоды
ГДЕ
	(Штрихкоды.Владелец, Штрихкоды.Характеристика, Штрихкоды.Упаковка) В
			(ВЫБРАТЬ
				ИсходныеДанные.Номенклатура,
				ИсходныеДанные.Характеристика,
				ИсходныеДанные.Упаковка
			ИЗ
				ИсходныеДанные)
{ГДЕ
	Штрихкоды.Владелец.* КАК Номенклатура,
	Штрихкоды.Характеристика.*,
	Штрихкоды.Упаковка.*}

СГРУППИРОВАТЬ ПО
	Штрихкоды.Владелец,
	Штрихкоды.Характеристика,
	Штрихкоды.Упаковка

ИНДЕКСИРОВАТЬ ПО
	Номенклатура,
	Характеристика,
	Упаковка
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	МАКСИМУМ(КодыТоваровSKU.SKU) КАК SKU,
	КодыТоваровSKU.Номенклатура КАК Номенклатура,
	КодыТоваровSKU.Характеристика КАК Характеристика,
	КодыТоваровSKU.Упаковка КАК Упаковка
ПОМЕСТИТЬ КодыSKU
ИЗ
	РегистрСведений.КодыТоваровSKU КАК КодыТоваровSKU
ГДЕ
	(КодыТоваровSKU.Номенклатура, КодыТоваровSKU.Характеристика, КодыТоваровSKU.Упаковка) В
			(ВЫБРАТЬ
				ИсходныеДанные.Номенклатура,
				ИсходныеДанные.Характеристика,
				ИсходныеДанные.Упаковка
			ИЗ
				ИсходныеДанные)
{ГДЕ
	КодыТоваровSKU.Номенклатура.*,
	КодыТоваровSKU.Характеристика.*,
	КодыТоваровSKU.Упаковка.*}

СГРУППИРОВАТЬ ПО
	КодыТоваровSKU.Номенклатура,
	КодыТоваровSKU.Характеристика,
	КодыТоваровSKU.Упаковка

ИНДЕКСИРОВАТЬ ПО
	Номенклатура,
	Характеристика,
	Упаковка
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ИсходныеДанные.Номенклатура,
	ИсходныеДанные.Характеристика,
	ИсходныеДанные.Упаковка,
	ЕСТЬNULL(ИсходныеДанные.Упаковка.Коэффициент, 1) КАК КоэффициентУпаковки,
	&amp;ВидЦены КАК ВидЦен,
	ЕСТЬNULL(Цены.Цена, 0) КАК Цена,
	ЕСТЬNULL(Цены.Период, ДАТАВРЕМЯ(1, 1, 1)) КАК ПериодЦены,
	ЕСТЬNULL(Цены.Упаковка.Коэффициент, 1) КАК КоэффициентУпаковкиЦены
ПОМЕСТИТЬ ТоварыСЦенами
ИЗ
	ИсходныеДанные КАК ИсходныеДанные
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.ЦеныНоменклатуры.СрезПоследних(&amp;ЦеныНаДату, ВидЦены = &amp;ВидЦены) КАК Цены
		ПО ИсходныеДанные.Номенклатура = Цены.Номенклатура
			И ИсходныеДанные.Характеристика = Цены.Характеристика
ГДЕ
	&amp;ЦеныПоВидуЦены
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	Ассортимент.Номенклатура КАК Номенклатура,
	Ассортимент.ВидЦен КАК ВидЦен
ПОМЕСТИТЬ ВидыЦенАссортимента
ИЗ
	РегистрСведений.Ассортимент.СрезПоследних(
			КОНЕЦПЕРИОДА(&amp;ЦеныНаДату, ДЕНЬ),
			ОбъектПланирования = &amp;ФорматМагазина
				И Номенклатура В
					(ВЫБРАТЬ
						Т.Номенклатура
					ИЗ
						ИсходныеДанные КАК Т)
				И &amp;ИспользоватьАссортимент
				И НЕ &amp;ЦеныПоВидуЦены
				И НЕ &amp;ЦеныНазначенныеДействующие) КАК Ассортимент

ИНДЕКСИРОВАТЬ ПО
	Номенклатура,
	ВидЦен
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ИсходныеДанные.Номенклатура,
	ИсходныеДанные.Характеристика,
	ИсходныеДанные.Упаковка,
	ЕСТЬNULL(ИсходныеДанные.Упаковка.Коэффициент, 1) КАК КоэффициентУпаковки,
	ВидыЦенАссортимента.ВидЦен КАК ВидЦен,
	ЦеныПоАссортименту.Цена КАК Цена,
	ЦеныПоАссортименту.Период КАК ПериодЦены,
	ЕСТЬNULL(ЦеныПоАссортименту.Упаковка.Коэффициент, 1) КАК КоэффициентУпаковкиЦены
ПОМЕСТИТЬ ТоварыСЦенамиАссортимента
ИЗ
	ИсходныеДанные КАК ИсходныеДанные
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ВидыЦенАссортимента КАК ВидыЦенАссортимента
		ПО ИсходныеДанные.Номенклатура = ВидыЦенАссортимента.Номенклатура
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.ЦеныНоменклатуры.СрезПоследних(
				&amp;ЦеныНаДату,
				Номенклатура В
						(ВЫБРАТЬ
							ВидыЦенАссортимента.Номенклатура
						ИЗ
							ВидыЦенАссортимента КАК ВидыЦенАссортимента)
					И ВидЦены В
						(ВЫБРАТЬ РАЗЛИЧНЫЕ
							ВидыЦенАссортимента.ВидЦен
						ИЗ
							ВидыЦенАссортимента КАК ВидыЦенАссортимента)) КАК ЦеныПоАссортименту
		ПО ИсходныеДанные.Номенклатура = ЦеныПоАссортименту.Номенклатура
			И ИсходныеДанные.Характеристика = ЦеныПоАссортименту.Характеристика
			И (ВидыЦенАссортимента.ВидЦен = ЦеныПоАссортименту.ВидЦены)
			И (&amp;ИспользоватьАссортимент)
			И (НЕ &amp;ЦеныПоВидуЦены)
			И (НЕ &amp;ЦеныНазначенныеДействующие)
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ЦеновыеГруппы.ЦеноваяГруппа КАК ЦеноваяГруппа,
	ЦеновыеГруппы.ВидЦен КАК ВидЦен
ПОМЕСТИТЬ ЦеновыеГруппыПравила
ИЗ
	Справочник.ПравилаЦенообразования.ЦеновыеГруппы КАК ЦеновыеГруппы
ГДЕ
	ЦеновыеГруппы.Ссылка = &amp;ПравилоЦенообразования
	И НЕ &amp;ЦеныПоВидуЦены
	И НЕ &amp;ЦеныНазначенныеДействующие
	И НЕ &amp;ИспользоватьАссортимент

ИНДЕКСИРОВАТЬ ПО
	ВидЦен,
	ЦеноваяГруппа
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ВидЦеныПравила.ВидЦен КАК ВидЦен
ПОМЕСТИТЬ ВидЦеныПравила
ИЗ
	Справочник.ПравилаЦенообразования КАК ВидЦеныПравила
ГДЕ
	ВидЦеныПравила.Ссылка = &amp;ПравилоЦенообразования
	И НЕ &amp;ЦеныПоВидуЦены
	И НЕ &amp;ЦеныНазначенныеДействующие
	И НЕ &amp;ИспользоватьАссортимент
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ИсходныеДанные.Номенклатура,
	ИсходныеДанные.Характеристика,
	ИсходныеДанные.Упаковка,
	ЕСТЬNULL(ЦеновыеГруппыПравила.ВидЦен, ВидЦеныПравила.ВидЦен) КАК ВидЦен
ПОМЕСТИТЬ ИсходныеДанныеСВидамиЦен
ИЗ
	ИсходныеДанные КАК ИсходныеДанные
		ЛЕВОЕ СОЕДИНЕНИЕ ЦеновыеГруппыПравила КАК ЦеновыеГруппыПравила
		ПО (ЦеновыеГруппыПравила.ЦеноваяГруппа = ИсходныеДанные.Номенклатура.ЦеноваяГруппа)
		ЛЕВОЕ СОЕДИНЕНИЕ ВидЦеныПравила КАК ВидЦеныПравила
		ПО (ИСТИНА)
ГДЕ
	НЕ &amp;ЦеныПоВидуЦены
	И НЕ &amp;ЦеныНазначенныеДействующие
	И НЕ &amp;ИспользоватьАссортимент
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ИсходныеДанные.Номенклатура,
	ИсходныеДанные.Характеристика,
	ИсходныеДанные.Упаковка,
	ЕСТЬNULL(ИсходныеДанные.Упаковка.Коэффициент, 1) КАК КоэффициентУпаковки,
	ИсходныеДанные.ВидЦен КАК ВидЦен,
	ЕСТЬNULL(Цены.Цена, 0) КАК Цена,
	ЕСТЬNULL(Цены.Период, ДАТАВРЕМЯ(1, 1, 1)) КАК ПериодЦены,
	ЕСТЬNULL(Цены.Упаковка.Коэффициент, 1) КАК КоэффициентУпаковкиЦены
ПОМЕСТИТЬ ТоварыСЦенамиПоВидамЦен
ИЗ
	ИсходныеДанныеСВидамиЦен КАК ИсходныеДанные
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.ЦеныНоменклатуры.СрезПоследних(
				&amp;ЦеныНаДату,
				ВидЦены В
					(ВЫБРАТЬ РАЗЛИЧНЫЕ
						Т.ВидЦен
					ИЗ
						ИсходныеДанныеСВидамиЦен КАК Т)) КАК Цены
		ПО ИсходныеДанные.Номенклатура = Цены.Номенклатура
			И ИсходныеДанные.Характеристика = Цены.Характеристика
			И ИсходныеДанные.ВидЦен = Цены.ВидЦены
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ИсходныеДанные.Номенклатура,
	ИсходныеДанные.Характеристика,
	ИсходныеДанные.Упаковка,
	ЕСТЬNULL(ИсходныеДанные.Упаковка.Коэффициент, 1) КАК КоэффициентУпаковки,
	ЕСТЬNULL(ДействующиеЦены.Цена, 0) КАК Цена,
	ЕСТЬNULL(ДействующиеЦены.Период, ДАТАВРЕМЯ(1, 1, 1)) КАК ПериодЦены,
	ЕСТЬNULL(ДействующиеЦены.Упаковка.Коэффициент, 1) КАК КоэффициентУпаковкиЦены
ПОМЕСТИТЬ ТоварыСДействующимиЦенами
ИЗ
	ИсходныеДанные КАК ИсходныеДанные
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.ДействующиеЦеныНоменклатуры.СрезПоследних(&amp;ЦеныНаДату, ОбъектЦенообразования = &amp;МагазинДляЦен) КАК ДействующиеЦены
		ПО ИсходныеДанные.Номенклатура = ДействующиеЦены.Номенклатура
			И ИсходныеДанные.Характеристика = ДействующиеЦены.Характеристика
ГДЕ
	&amp;ЦеныНазначенныеДействующие
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ТоварыСЦенами.Номенклатура,
	ТоварыСЦенами.Характеристика,
	ТоварыСЦенами.Упаковка,
	ТоварыСЦенами.КоэффициентУпаковки,
	ТоварыСЦенами.ВидЦен,
	ТоварыСЦенами.Цена,
	ТоварыСЦенами.ПериодЦены,
	ТоварыСЦенами.КоэффициентУпаковкиЦены,
	ЕСТЬNULL(ПредыдущиеЦены.Цена, 0) КАК ПредыдущаяЦена,
	ЕСТЬNULL(ПредыдущиеЦены.Период, ДАТАВРЕМЯ(1, 1, 1)) КАК ПериодПредыдущейЦены,
	ЕСТЬNULL(ПредыдущиеЦены.Упаковка.Коэффициент, 1) КАК КоэффициентУпаковкиПредыдущейЦены
ПОМЕСТИТЬ ЦеныНоменклатуры
ИЗ
	ТоварыСЦенамиПоВидамЦен КАК ТоварыСЦенами
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.ЦеныНоменклатуры КАК ПредыдущиеЦены
		ПО ТоварыСЦенами.Номенклатура = ПредыдущиеЦены.Номенклатура
			И ТоварыСЦенами.Характеристика = ПредыдущиеЦены.Характеристика
			И (ПредыдущиеЦены.ВидЦены = ТоварыСЦенами.ВидЦен)
			И (ПредыдущиеЦены.Период В
				(ВЫБРАТЬ
					МАКСИМУМ(Цены.Период)
				ИЗ
					РегистрСведений.ЦеныНоменклатуры КАК Цены
				ГДЕ
					ТоварыСЦенами.Номенклатура = Цены.Номенклатура
					И ТоварыСЦенами.Характеристика = Цены.Характеристика
					И Цены.ВидЦены = ТоварыСЦенами.ВидЦен
					И Цены.Период &lt; ТоварыСЦенами.ПериодЦены
					И Цены.Цена &lt;&gt; ТоварыСЦенами.Цена))

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	ТоварыСЦенамиАссортимента.Номенклатура,
	ТоварыСЦенамиАссортимента.Характеристика,
	ТоварыСЦенамиАссортимента.Упаковка,
	ТоварыСЦенамиАссортимента.КоэффициентУпаковки,
	ТоварыСЦенамиАссортимента.ВидЦен,
	ТоварыСЦенамиАссортимента.Цена,
	ТоварыСЦенамиАссортимента.ПериодЦены,
	ТоварыСЦенамиАссортимента.КоэффициентУпаковкиЦены,
	ЕСТЬNULL(ПредыдущиеЦены.Цена, 0) КАК ПредыдущаяЦена,
	ЕСТЬNULL(ПредыдущиеЦены.Период, ДАТАВРЕМЯ(1, 1, 1)) КАК ПериодПредыдущейЦены,
	ЕСТЬNULL(ПредыдущиеЦены.Упаковка.Коэффициент, 1) КАК КоэффициентУпаковкиПредыдущейЦены
ИЗ
	ТоварыСЦенамиАссортимента КАК ТоварыСЦенамиАссортимента
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.ЦеныНоменклатуры КАК ПредыдущиеЦены
		ПО ТоварыСЦенамиАссортимента.Номенклатура = ПредыдущиеЦены.Номенклатура
			И ТоварыСЦенамиАссортимента.Характеристика = ПредыдущиеЦены.Характеристика
			И (ПредыдущиеЦены.ВидЦены = ТоварыСЦенамиАссортимента.ВидЦен)
			И (ПредыдущиеЦены.Период В
				(ВЫБРАТЬ
					МАКСИМУМ(Цены.Период)
				ИЗ
					РегистрСведений.ЦеныНоменклатуры КАК Цены
				ГДЕ
					ТоварыСЦенамиАссортимента.Номенклатура = Цены.Номенклатура
					И ТоварыСЦенамиАссортимента.Характеристика = Цены.Характеристика
					И Цены.ВидЦены = ТоварыСЦенамиАссортимента.ВидЦен
					И Цены.Период &lt; ТоварыСЦенамиАссортимента.ПериодЦены
					И Цены.Цена &lt;&gt; ТоварыСЦенамиАссортимента.Цена))

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	ТоварыСЦенами.Номенклатура,
	ТоварыСЦенами.Характеристика,
	ТоварыСЦенами.Упаковка,
	ТоварыСЦенами.КоэффициентУпаковки,
	ТоварыСЦенами.ВидЦен,
	ТоварыСЦенами.Цена,
	ТоварыСЦенами.ПериодЦены,
	ТоварыСЦенами.КоэффициентУпаковкиЦены,
	ЕСТЬNULL(ПредыдущиеЦены.Цена, 0),
	ЕСТЬNULL(ПредыдущиеЦены.Период, ДАТАВРЕМЯ(1, 1, 1)),
	ЕСТЬNULL(ПредыдущиеЦены.Упаковка.Коэффициент, 1)
ИЗ
	ТоварыСЦенами КАК ТоварыСЦенами
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.ЦеныНоменклатуры КАК ПредыдущиеЦены
		ПО ТоварыСЦенами.Номенклатура = ПредыдущиеЦены.Номенклатура
			И ТоварыСЦенами.Характеристика = ПредыдущиеЦены.Характеристика
			И (ПредыдущиеЦены.ВидЦены = &amp;ВидЦены)
			И (ПредыдущиеЦены.Период В
				(ВЫБРАТЬ
					МАКСИМУМ(Цены.Период)
				ИЗ
					РегистрСведений.ЦеныНоменклатуры КАК Цены
				ГДЕ
					ТоварыСЦенами.Номенклатура = Цены.Номенклатура
					И ТоварыСЦенами.Характеристика = Цены.Характеристика
					И Цены.ВидЦены = &amp;ВидЦены
					И Цены.Период &lt; ТоварыСЦенами.ПериодЦены
					И Цены.Цена &lt;&gt; ТоварыСЦенами.Цена))

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	ТоварыСЦенами.Номенклатура,
	ТоварыСЦенами.Характеристика,
	ТоварыСЦенами.Упаковка,
	ТоварыСЦенами.КоэффициентУпаковки,
	NULL,
	ТоварыСЦенами.Цена,
	ТоварыСЦенами.ПериодЦены,
	ТоварыСЦенами.КоэффициентУпаковкиЦены,
	ЕСТЬNULL(ПредыдущиеЦены.Цена, 0),
	ЕСТЬNULL(ПредыдущиеЦены.Период, ДАТАВРЕМЯ(1, 1, 1)),
	ЕСТЬNULL(ПредыдущиеЦены.Упаковка.Коэффициент, 1)
ИЗ
	ТоварыСДействующимиЦенами КАК ТоварыСЦенами
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.ДействующиеЦеныНоменклатуры КАК ПредыдущиеЦены
		ПО ТоварыСЦенами.Номенклатура = ПредыдущиеЦены.Номенклатура
			И ТоварыСЦенами.Характеристика = ПредыдущиеЦены.Характеристика
			И ПредыдущиеЦены.ОбъектЦенообразования = &amp;МагазинДляЦен
			И (ПредыдущиеЦены.Период В
				(ВЫБРАТЬ
					МАКСИМУМ(Цены.Период)
				ИЗ
					РегистрСведений.ДействующиеЦеныНоменклатуры КАК Цены
				ГДЕ
					ТоварыСЦенами.Номенклатура = Цены.Номенклатура
					И ТоварыСЦенами.Характеристика = Цены.Характеристика
					И Цены.ОбъектЦенообразования = &amp;МагазинДляЦен
					И Цены.Период &lt; ТоварыСЦенами.ПериодЦены
					И Цены.Цена &lt;&gt; ТоварыСЦенами.Цена))
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ЦеныНоменклатуры.Номенклатура,
	ЦеныНоменклатуры.Характеристика,
	ЦеныНоменклатуры.Упаковка,
	ЦеныНоменклатуры.КоэффициентУпаковки,
	ЦеныНоменклатуры.ВидЦен,
	ВЫРАЗИТЬ(ВЫБОР
			КОГДА ЦеныНоменклатуры.КоэффициентУпаковкиЦены = 0
				ТОГДА ЦеныНоменклатуры.Цена * ЦеныНоменклатуры.КоэффициентУпаковки
			ИНАЧЕ ЦеныНоменклатуры.Цена * ЦеныНоменклатуры.КоэффициентУпаковки / ЦеныНоменклатуры.КоэффициентУпаковкиЦены
		КОНЕЦ КАК ЧИСЛО(15, 2)) КАК Цена,
	ЦеныНоменклатуры.ПериодЦены,
	ЦеныНоменклатуры.КоэффициентУпаковкиЦены,
	ВЫРАЗИТЬ(ВЫБОР
			КОГДА ЦеныНоменклатуры.КоэффициентУпаковкиПредыдущейЦены = 0
				ТОГДА ЦеныНоменклатуры.ПредыдущаяЦена * ЦеныНоменклатуры.КоэффициентУпаковки
			ИНАЧЕ ЦеныНоменклатуры.ПредыдущаяЦена * ЦеныНоменклатуры.КоэффициентУпаковки / ЦеныНоменклатуры.КоэффициентУпаковкиПредыдущейЦены
		КОНЕЦ КАК ЧИСЛО(15, 2)) КАК ПредыдущаяЦена,
	ЦеныНоменклатуры.ПериодПредыдущейЦены,
	ЦеныНоменклатуры.КоэффициентУпаковкиПредыдущейЦены,
	ВЫРАЗИТЬ(ВЫБОР
			КОГДА ЕСТЬNULL(ЦеныМинимальные.Упаковка.Коэффициент, 1) = 0
				ТОГДА ЕСТЬNULL(ЦеныМинимальные.Цена, 0) * ЦеныНоменклатуры.КоэффициентУпаковки
			ИНАЧЕ ЕСТЬNULL(ЦеныМинимальные.Цена, 0) * ЦеныНоменклатуры.КоэффициентУпаковки / ЕСТЬNULL(ЦеныМинимальные.Упаковка.Коэффициент, 1)
		КОНЕЦ КАК ЧИСЛО(15, 2)) КАК МинимальнаяЦена,
	ЕСТЬNULL(ЦеныМинимальные.Период, ДАТАВРЕМЯ(1, 1, 1)) КАК ПериодМинимальнойЦены,
	ЕСТЬNULL(ЦеныМинимальные.Упаковка.Коэффициент, 1) КАК КоэффициентУпаковкиМинимальнойЦены
ПОМЕСТИТЬ ТаблицаИтоговая
ИЗ
	ЦеныНоменклатуры КАК ЦеныНоменклатуры
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.ЦеныНоменклатуры.СрезПоследних(
				&amp;ЦеныНаДату,
				ВидЦены = &amp;ВидМинимальныхЦенПродажи
					И (Номенклатура, Характеристика) В
						(ВЫБРАТЬ
							ИсходныеДанные.Номенклатура,
							ИсходныеДанные.Характеристика
						ИЗ
							ИсходныеДанные КАК ИсходныеДанные)
					И &amp;ЦеныМинимальные) КАК ЦеныМинимальные
		ПО ЦеныНоменклатуры.Номенклатура = ЦеныМинимальные.Номенклатура
			И ЦеныНоменклатуры.Характеристика = ЦеныМинимальные.Характеристика
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ТаблицаИтоговая.Номенклатура,
	ТаблицаИтоговая.Характеристика,
	ТаблицаИтоговая.Упаковка,
	ТаблицаИтоговая.КоэффициентУпаковки,
	ТаблицаИтоговая.ВидЦен,
	ВЫБОР
		КОГДА ТаблицаИтоговая.Цена &lt; ТаблицаИтоговая.МинимальнаяЦена
			ТОГДА ТаблицаИтоговая.МинимальнаяЦена
		ИНАЧЕ ТаблицаИтоговая.Цена
	КОНЕЦ КАК Цена,
	ВЫБОР
		КОГДА ТаблицаИтоговая.Цена &lt; ТаблицаИтоговая.МинимальнаяЦена
			ТОГДА ТаблицаИтоговая.ПериодМинимальнойЦены
		ИНАЧЕ ТаблицаИтоговая.ПериодЦены
	КОНЕЦ КАК ПериодЦены,
	ВЫБОР
		КОГДА ТаблицаИтоговая.Цена &lt; ТаблицаИтоговая.МинимальнаяЦена
			ТОГДА ТаблицаИтоговая.КоэффициентУпаковкиМинимальнойЦены
		ИНАЧЕ ТаблицаИтоговая.КоэффициентУпаковкиЦены
	КОНЕЦ КАК КоэффициентУпаковкиЦены,
	ТаблицаИтоговая.ПредыдущаяЦена,
	ТаблицаИтоговая.ПериодПредыдущейЦены,
	ТаблицаИтоговая.КоэффициентУпаковкиПредыдущейЦены
ПОМЕСТИТЬ ЦеныНоменклатурыСУчетомМинимальных
ИЗ
	ТаблицаИтоговая КАК ТаблицаИтоговая
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ИсходныеДанныеПоследнийЗапрос.Номенклатура КАК Номенклатура,
	ИсходныеДанныеПоследнийЗапрос.Характеристика КАК Характеристика,
	ИсходныеДанныеПоследнийЗапрос.Упаковка КАК Упаковка,
	МАКСИМУМ(ИсходныеДанныеПоследнийЗапрос.Количество) КАК Количество,
	МАКСИМУМ(ИсходныеДанныеПоследнийЗапрос.КоличествоЦенниковДляПечати) КАК КоличествоЦенниковДляПечати,
	МАКСИМУМ(ИсходныеДанныеПоследнийЗапрос.КоличествоЭтикетокДляПечати) КАК КоличествоЭтикетокДляПечати,
	МАКСИМУМ(ИсходныеДанныеПоследнийЗапрос.ШаблонЭтикеткиДляПечати) КАК ШаблонЭтикеткиДляПечати,
	МАКСИМУМ(ИсходныеДанныеПоследнийЗапрос.ШаблонЦенникаДляПечати) КАК ШаблонЦенникаДляПечати,
	МАКСИМУМ(ШтрихкодыНоменклатуры.Штрихкод) КАК Штрихкод,
	ВидыЦен.Ссылка КАК ВидЦены,
	Организации.Ссылка КАК Организация,
	СправочникМагазины.Ссылка КАК Магазин,
	МАКСИМУМ(ЦеныНоменклатуры.Цена) КАК Цена,
	МАКСИМУМ(ЦеныНоменклатуры.ПредыдущаяЦена) КАК ПредыдущаяЦена,
	МАКСИМУМ(ЦеныНоменклатуры.ПериодЦены) КАК ДатаПоследнегоИзмененияЦены,
	МАКСИМУМ(СкидкиНаценки.ЗначениеСкидкиНаценки) КАК ПроцентСкидки,
	ВЫРАЗИТЬ(МАКСИМУМ(ЦеныНоменклатуры.Цена * (100 - ЕСТЬNULL(СкидкиНаценки.ЗначениеСкидкиНаценки, 0)) / 100) КАК ЧИСЛО(15, 2)) КАК ЦенаСоСкидкой,
	МАКСИМУМ(СкидкиНаценки.Наименование) КАК НаименованиеСкидки,
	ВЫРАЗИТЬ(МАКСИМУМ(ВЫБОР
				КОГДА ЕСТЬNULL(ИсходныеДанныеПоследнийЗапрос.Упаковка.Коэффициент, 1) = 0
					ТОГДА ТоварыНаСкладахОстатки.КоличествоОстаток
				ИНАЧЕ ТоварыНаСкладахОстатки.КоличествоОстаток / ЕСТЬNULL(ИсходныеДанныеПоследнийЗапрос.Упаковка.Коэффициент, 1)
			КОНЕЦ) КАК ЧИСЛО(17, 3)) КАК ОстатокНаСкладе,
	НоменклатураСегмента.Сегмент КАК Сегмент,
	МАКСИМУМ(&amp;ТекущееВремя) КАК ТекущееВремя,
	Пользователи.Ссылка КАК ТекущийПользователь,
	МАКСИМУМ(КодыSKU.SKU) КАК SKU
{ВЫБРАТЬ
	Номенклатура.*,
	Характеристика.*,
	Упаковка.*,
	Количество,
	КоличествоЦенниковДляПечати,
	КоличествоЭтикетокДляПечати,
	ШаблонЦенникаДляПечати,
	ШаблонЭтикеткиДляПечати,
	Штрихкод,
	ВидЦены.*,
	Организация.*,
	Магазин.*,
	Цена,
	ПредыдущаяЦена,
	ДатаПоследнегоИзмененияЦены,
	ЦенаСоСкидкой,
	НаименованиеСкидки,
	ОстатокНаСкладе,
	Сегмент.*,
	ТекущееВремя,
	ТекущийПользователь.*,
	SKU}
ИЗ
	ИсходныеДанные КАК ИсходныеДанныеПоследнийЗапрос
		{ЛЕВОЕ СОЕДИНЕНИЕ ШтрихкодыНоменклатуры КАК ШтрихкодыНоменклатуры
		ПО ИсходныеДанныеПоследнийЗапрос.Номенклатура = ШтрихкодыНоменклатуры.Номенклатура
			И ИсходныеДанныеПоследнийЗапрос.Характеристика = ШтрихкодыНоменклатуры.Характеристика
			И ИсходныеДанныеПоследнийЗапрос.Упаковка = ШтрихкодыНоменклатуры.Упаковка}
		{ЛЕВОЕ СОЕДИНЕНИЕ ЦеныНоменклатурыСУчетомМинимальных КАК ЦеныНоменклатуры
		ПО ИсходныеДанныеПоследнийЗапрос.Номенклатура = ЦеныНоменклатуры.Номенклатура
			И ИсходныеДанныеПоследнийЗапрос.Характеристика = ЦеныНоменклатуры.Характеристика
			И ИсходныеДанныеПоследнийЗапрос.Упаковка = ЦеныНоменклатуры.Упаковка}
		{ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.НоменклатураСегмента КАК НоменклатураСегмента
		ПО ИсходныеДанныеПоследнийЗапрос.Номенклатура = НоменклатураСегмента.Номенклатура
			И ИсходныеДанныеПоследнийЗапрос.Характеристика = НоменклатураСегмента.Характеристика}
		{ЛЕВОЕ СОЕДИНЕНИЕ Справочник.ВидыЦен КАК ВидыЦен
		ПО (ВидыЦен.Ссылка = &amp;ВидЦены)}
		{ЛЕВОЕ СОЕДИНЕНИЕ Справочник.Магазины КАК СправочникМагазины
		ПО (СправочникМагазины.Ссылка = &amp;Магазин)}
		{ЛЕВОЕ СОЕДИНЕНИЕ Справочник.Пользователи КАК Пользователи
		ПО (Пользователи.Ссылка = &amp;ТекущийПользователь)}
		{ЛЕВОЕ СОЕДИНЕНИЕ РегистрНакопления.ТоварыНаСкладах.Остатки(, {(Склад).* КАК Склад, (Склад.Магазин).* КАК Магазин, (Номенклатура).* КАК Номенклатура, (Характеристика).* КАК Характеристика}) КАК ТоварыНаСкладахОстатки
		ПО ИсходныеДанныеПоследнийЗапрос.Номенклатура = ТоварыНаСкладахОстатки.Номенклатура
			И ИсходныеДанныеПоследнийЗапрос.Характеристика = ТоварыНаСкладахОстатки.Характеристика}
		{ЛЕВОЕ СОЕДИНЕНИЕ Справочник.Организации КАК Организации
		ПО ИсходныеДанныеПоследнийЗапрос.Организация.Ссылка = Организации.Ссылка}
		{ЛЕВОЕ СОЕДИНЕНИЕ КодыSKU КАК КодыSKU
		ПО ИсходныеДанныеПоследнийЗапрос.Номенклатура = КодыSKU.Номенклатура
			И ИсходныеДанныеПоследнийЗапрос.Характеристика = КодыSKU.Характеристика
			И ИсходныеДанныеПоследнийЗапрос.Упаковка = КодыSKU.Упаковка}
		{ЛЕВОЕ СОЕДИНЕНИЕ Справочник.СкидкиНаценки КАК СкидкиНаценки
		ПО (СкидкиНаценки.Ссылка = &amp;СкидкаНаценка)
			И (СкидкиНаценки.СпособПредоставления = ЗНАЧЕНИЕ(Перечисление.СпособыПредоставленияСкидокНаценок.Процент))}
{ГДЕ
	ИсходныеДанныеПоследнийЗапрос.Номенклатура.* КАК Номенклатура,
	ИсходныеДанныеПоследнийЗапрос.Характеристика.* КАК Характеристика,
	ИсходныеДанныеПоследнийЗапрос.Упаковка.* КАК Упаковка,
	ШтрихкодыНоменклатуры.Штрихкод КАК Штрихкод,
	ЦеныНоменклатуры.Цена КАК Цена,
	ЦеныНоменклатуры.ПериодЦены КАК ДатаПоследнегоИзмененияЦены,
	ТоварыНаСкладахОстатки.КоличествоОстаток КАК ОстатокНаСкладе,
	НоменклатураСегмента.Сегмент.* КАК Сегмент,
	КодыSKU.SKU}

СГРУППИРОВАТЬ ПО
	ИсходныеДанныеПоследнийЗапрос.Номенклатура,
	ИсходныеДанныеПоследнийЗапрос.Характеристика,
	ИсходныеДанныеПоследнийЗапрос.Упаковка,
	ВидыЦен.Ссылка,
	Организации.Ссылка,
	СправочникМагазины.Ссылка,
	НоменклатураСегмента.Сегмент,
	Пользователи.Ссылка

УПОРЯДОЧИТЬ ПО
	ИсходныеДанныеПоследнийЗапрос.Номенклатура.Наименование
</query>
		<autoFillFields>false</autoFillFields>
	</dataSet>
	<parameter>
		<name>ТекущееВремя</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Текущее время</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:nil="true"/>
		<useRestriction>true</useRestriction>
		<availableAsField>false</availableAsField>
	</parameter>
	<parameter>
		<name>ТекущийПользователь</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Текущий пользователь</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type xmlns:d4p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d4p1:CatalogRef.Пользователи</v8:Type>
		</valueType>
		<value xsi:type="dcscor:DesignTimeValue">Справочник.Пользователи.ПустаяСсылка</value>
		<useRestriction>true</useRestriction>
		<availableAsField>false</availableAsField>
	</parameter>
	<parameter>
		<name>Магазин</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Магазин</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type xmlns:d4p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d4p1:CatalogRef.Магазины</v8:Type>
		</valueType>
		<value xsi:type="dcscor:DesignTimeValue">Справочник.Магазины.ПустаяСсылка</value>
		<useRestriction>true</useRestriction>
		<availableAsField>false</availableAsField>
	</parameter>
	<parameter>
		<name>ПравилоЦенообразования</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Правило ценообразования</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type xmlns:d4p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d4p1:CatalogRef.ПравилаЦенообразования</v8:Type>
		</valueType>
		<value xsi:type="dcscor:DesignTimeValue">Справочник.ПравилаЦенообразования.ПустаяСсылка</value>
		<useRestriction>true</useRestriction>
		<availableAsField>false</availableAsField>
	</parameter>
	<parameter>
		<name>ЦеныПоВидуЦены</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Цены по виду цены</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:boolean</v8:Type>
		</valueType>
		<value xsi:type="xs:boolean">false</value>
		<useRestriction>true</useRestriction>
		<availableAsField>false</availableAsField>
	</parameter>
	<parameter>
		<name>МагазинДляЦен</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Магазин для цен</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type xmlns:d4p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d4p1:CatalogRef.Магазины</v8:Type>
		</valueType>
		<value xsi:type="dcscor:DesignTimeValue">Справочник.Магазины.ПустаяСсылка</value>
		<useRestriction>true</useRestriction>
		<availableAsField>false</availableAsField>
	</parameter>
	<parameter>
		<name>ЦеныНазначенныеДействующие</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Цены назначенные действующие</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:boolean</v8:Type>
		</valueType>
		<value xsi:type="xs:boolean">false</value>
		<useRestriction>true</useRestriction>
		<availableAsField>false</availableAsField>
	</parameter>
	<parameter>
		<name>ЦеныМинимальные</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Цены минимальные</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:boolean</v8:Type>
		</valueType>
		<value xsi:type="xs:boolean">false</value>
		<useRestriction>true</useRestriction>
		<availableAsField>false</availableAsField>
	</parameter>
	<parameter>
		<name>ВидМинимальныхЦенПродажи</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Вид минимальных цен продажи</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type xmlns:d4p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d4p1:CatalogRef.ВидыЦен</v8:Type>
		</valueType>
		<value xsi:nil="true"/>
		<useRestriction>true</useRestriction>
		<availableAsField>false</availableAsField>
	</parameter>
	<parameter>
		<name>ЦеныНаДату</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Цены на дату</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>true</useRestriction>
		<availableAsField>false</availableAsField>
	</parameter>
	<parameter>
		<name>ВидЦены</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Вид цены</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type xmlns:d4p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d4p1:CatalogRef.ВидыЦен</v8:Type>
		</valueType>
		<value xsi:nil="true"/>
		<useRestriction>true</useRestriction>
		<availableAsField>false</availableAsField>
	</parameter>
	<parameter>
		<name>СкидкаНаценка</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Скидка наценка</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type xmlns:d4p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d4p1:CatalogRef.СкидкиНаценки</v8:Type>
		</valueType>
		<value xsi:nil="true"/>
		<useRestriction>false</useRestriction>
		<denyIncompleteValues>true</denyIncompleteValues>
		<use>Always</use>
	</parameter>
	<parameter>
		<name>ИспользоватьАссортимент</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Использовать ассортимент</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:boolean</v8:Type>
		</valueType>
		<value xsi:type="xs:boolean">false</value>
		<useRestriction>true</useRestriction>
		<availableAsField>false</availableAsField>
	</parameter>
	<parameter>
		<name>ФорматМагазина</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Формат магазина</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type xmlns:d4p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d4p1:CatalogRef.ФорматыМагазинов</v8:Type>
		</valueType>
		<value xsi:nil="true"/>
		<useRestriction>true</useRestriction>
		<availableAsField>false</availableAsField>
	</parameter>
	<settingsVariant>
		<dcsset:name>Основной</dcsset:name>
		<dcsset:presentation xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Основной</v8:content>
			</v8:item>
		</dcsset:presentation>
		<dcsset:settings xmlns:style="http://v8.1c.ru/8.1/data/ui/style" xmlns:sys="http://v8.1c.ru/8.1/data/ui/fonts/system" xmlns:web="http://v8.1c.ru/8.1/data/ui/colors/web" xmlns:win="http://v8.1c.ru/8.1/data/ui/colors/windows">
			<dcsset:filter>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">Склад</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:right xsi:type="dcscor:DesignTimeValue">Справочник.Склады.ПустаяСсылка</dcsset:right>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">Штрихкод</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:right xsi:type="xs:string"/>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">Номенклатура</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:right xsi:type="dcscor:DesignTimeValue">Справочник.Номенклатура.ПустаяСсылка</dcsset:right>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">Номенклатура.ЦеноваяГруппа</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:right xsi:type="dcscor:DesignTimeValue">Справочник.ЦеновыеГруппы.ПустаяСсылка</dcsset:right>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">Штрихкод</dcsset:left>
					<dcsset:comparisonType>Filled</dcsset:comparisonType>
					<dcsset:presentation xsi:type="xs:string">Только со штрихкодом</dcsset:presentation>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">Цена</dcsset:left>
					<dcsset:comparisonType>Greater</dcsset:comparisonType>
					<dcsset:right xsi:type="xs:decimal">0</dcsset:right>
					<dcsset:presentation xsi:type="xs:string">Только с ценами</dcsset:presentation>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">ОстатокНаСкладе</dcsset:left>
					<dcsset:comparisonType>Greater</dcsset:comparisonType>
					<dcsset:right xsi:type="xs:decimal">0</dcsset:right>
					<dcsset:presentation xsi:type="xs:string">Только с остатками на складе</dcsset:presentation>
				</dcsset:item>
			</dcsset:filter>
			<dcsset:dataParameters>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>СкидкаНаценка</dcscor:parameter>
					<dcscor:value xsi:nil="true"/>
					<dcsset:userSettingID>be9e6226-c8c9-41eb-ba7a-0516cf2a53c4</dcsset:userSettingID>
				</dcscor:item>
			</dcsset:dataParameters>
			<dcsset:item xsi:type="dcsset:StructureItemGroup">
				<dcsset:order>
					<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
				</dcsset:order>
				<dcsset:selection>
					<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
				</dcsset:selection>
			</dcsset:item>
		</dcsset:settings>
	</settingsVariant>
</DataCompositionSchema>